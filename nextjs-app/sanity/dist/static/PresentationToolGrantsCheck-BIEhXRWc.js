const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["static/QRCodeSVG-D2ORQHR6.js","static/sanity-CeuAV6R0.js","static/LoaderQueries-D1M5N6Wk.js","static/utils-D6vawtMD.js","static/DisplayedDocumentBroadcaster-g0KMFVaH.js","static/LiveQueries-BO4blD4R.js","static/PostMessageDocuments-GHkoZ36J.js","static/PostMessageRefreshMutations-BNiGkGGz.js","static/PostMessagePerspective-CrP8RKQ_.js","static/PostMessagePreviewSnapshots-DX1BT2Im.js","static/PostMessageSchema-xdjtB8ED.js","static/PostMessageTelemetry-BvsxFQq2.js"])))=>i.map(i=>d[i]);
import{$ as Pr,a0 as Sr,a1 as Tt,a2 as _r,r as f,a3 as fn,a4 as jr,j as l,a5 as Er,a6 as $n,a7 as dt,a8 as Me,a9 as Wt,aa as Rr,ab as Ze,ac as Tr,ad as An,ae as Ct,af as Cr,ag as Nt,ah as It,ai as Mn,aj as Bt,ak as Ir,al as Ut,am as kr,an as $r,ao as Ar,ap as Mr,aq as On,h as ue,b as z,ar as wt,as as it,at as Te,N as ht,T as V,o as Pe,n as Ln,u as ot,au as Pt,av as Ht,aw as zn,ax as we,ay as Or,az as Dn,G as Lr,aA as tt,aB as Wn,B as ne,S as Re,C as le,aC as Nn,aD as zr,aE as qt,x as Dr,F as J,aF as Kt,aG as Wr,aH as Un,aI as hn,aJ as qn,aK as Nr,aL as Ur,m as mt,k as gt,aM as Vn,aN as Fn,aO as qr,aP as Vr,aQ as Se,aR as Bn,aS as Gt,aT as Fr,aU as Br,aV as Xt,aW as Hn,aX as Hr,aY as Kr,aZ as Gr,K as Xr,a_ as Jt,a$ as Jr,b0 as mn,b1 as Qr,b2 as Yr,b3 as Zr,b4 as es,b5 as Kn,b6 as ts,b7 as Qt,I as ns,a as rs,b8 as Gn,b9 as ss,ba as as,bb as is,bc as os,bd as cs,be as ls,bf as St,bg as us,bh as Xn,bi as ds,bj as ps,bk as fs,bl as hs,bm as ms,A as gs,bn as ys,bo as vs,bp as bs,bq as xs,y as ws,br as Ps,bs as Ss,bt as _s,bu as gn,bv as js,bw as Es,bx as Rs,by as Ts,bz as Jn,bA as Qn,bB as Cs,bC as Is,bD as ks,bE as $s,t as As,bF as Ms}from"./sanity-CeuAV6R0.js";import{i as Os,D as Ls}from"./DisplayedDocumentBroadcaster-g0KMFVaH.js";function zs(t,e){return e===void 0&&(e=null),e=e??t,Pr(function(n,s){var r=[],a=0;n.subscribe(Sr(s,function(i){var o,c,u,p,d=null;a++%e===0&&r.push([]);try{for(var v=Tt(r),m=v.next();!m.done;m=v.next()){var y=m.value;y.push(i),t<=y.length&&(d=d??[],d.push(y))}}catch(g){o={error:g}}finally{try{m&&!m.done&&(c=v.return)&&c.call(v)}finally{if(o)throw o.error}}if(d)try{for(var h=Tt(d),b=h.next();!b.done;b=h.next()){var y=b.value;_r(r,y),s.next(y)}}catch(g){u={error:g}}finally{try{b&&!b.done&&(p=h.return)&&p.call(h)}finally{if(u)throw u.error}}},function(){var i,o;try{for(var c=Tt(r),u=c.next();!u.done;u=c.next()){var p=u.value;s.next(p)}}catch(d){i={error:d}}finally{try{u&&!u.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}s.complete()},void 0,function(){r=null}))})}function Ds({children:t,isValidProp:e,...n}){e&&Er(e),n={...f.useContext(fn),...n},n.isStatic=jr(()=>n.isStatic);const s=f.useMemo(()=>n,[JSON.stringify(n.transition),n.transformPagePoint,n.reducedMotion]);return l.jsx(fn.Provider,{value:s,children:t})}const Yt="sanity.previewUrlSecret",Yn="sanity-preview-url-secret",Le=`${Yn}.share-access`,Xe="sanity.previewUrlShareAccess",_t="2023-11-09",Zt="sanity-preview-secret",en="sanity-preview-pathname",rt="sanity-preview-perspective",nt="x-vercel-protection-bypass",tn="x-vercel-set-bypass-cookie",Zn=60*60,Ws=`*[_id == "${Le}" && _type == "${Xe}"][0].secret`,Ns=`*[_type == "${Yt}" && dateTime(_updatedAt) <= dateTime(now()) - ${Zn}]`,Us="sanity.vercelProtectionBypass",qs=`${Yn}.vercel-protection-bypass`,Vs=`*[_id == "${qs}" && _type == "${Us}"][0].secret`,nn="sanity.preview-url-secret",Fs=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,rn=/_key\s*==\s*['"](.*)['"]/,Bs=/^\d*:\d*$/;function sn(t){return typeof t=="number"||typeof t=="string"&&/^\[\d+\]$/.test(t)}function jt(t){return typeof t=="string"?rn.test(t.trim()):typeof t=="object"&&"_key"in t}function er(t){if(typeof t=="string"&&Bs.test(t))return!0;if(!Array.isArray(t)||t.length!==2)return!1;const[e,n]=t;return(typeof e=="number"||e==="")&&(typeof n=="number"||n==="")}function Hs(t,e,n){const s=typeof e=="string"?tr(e):e;if(!Array.isArray(s))throw new Error("Path must be an array or a string");let r=t;for(let a=0;a<s.length;a++){const i=s[a];if(sn(i)){if(!Array.isArray(r))return n;r=r[i]}if(jt(i)){if(!Array.isArray(r))return n;r=r.find(o=>o._key===i._key)}if(typeof i=="string"&&(r=typeof r=="object"&&r!==null?r[i]:void 0),typeof r>"u")return n}return r}function Ks(t){if(!Array.isArray(t))throw new Error("Path is not an array");return t.reduce((e,n,s)=>{const r=typeof n;if(r==="number")return`${e}[${n}]`;if(r==="string")return`${e}${s===0?"":"."}${n}`;if(jt(n)&&n._key)return`${e}[_key=="${n._key}"]`;if(Array.isArray(n)){const[a,i]=n;return`${e}[${a}:${i}]`}throw new Error(`Unsupported path segment \`${JSON.stringify(n)}\``)},"")}function tr(t){if(typeof t!="string")throw new Error("Path is not a string");const e=t.match(Fs);if(!e)throw new Error("Invalid path string");return e.map(Gs)}function Gs(t){return sn(t)?Xs(t):jt(t)?Js(t):er(t)?Qs(t):t}function Xs(t){return Number(t.replace(/[^\d]/g,""))}function Js(t){return{_key:t.match(rn)[1]}}function Qs(t){const[e,n]=t.split(":").map(s=>s===""?s:Number(s));return[e,n]}var nr=Object.freeze({__proto__:null,fromString:tr,get:Hs,isIndexSegment:sn,isIndexTuple:er,isKeySegment:jt,reKeySegment:rn,toString:Ks});const Ys="drafts",Zs="versions",st=".",yt=`${Ys}${st}`,rr=`${Zs}${st}`;function sr(t){return t.startsWith(yt)}function ar(t){return t.startsWith(rr)}function Vo(t){if(ar(t)){const e=ir(t);return yt+e}return sr(t)?t:yt+t}function Fo(t,e){if(e==="drafts"||e==="published")throw new Error('Version can not be "published" or "drafts"');return`${rr}${e}${st}${ir(t)}`}function ir(t){return ar(t)?t.split(st).slice(2).join(st):sr(t)?t.slice(yt.length):t}const yn={"\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","'":"\\'","\\":"\\\\"},vn={"\\f":"\f","\\n":`
`,"\\r":"\r","\\t":"	","\\'":"'","\\\\":"\\"};function ea(t){return`$${t.map(e=>typeof e=="string"?`['${e.replace(/[\f\n\r\t'\\]/g,n=>yn[n])}']`:typeof e=="number"?`[${e}]`:e._key!==""?`[?(@._key=='${e._key.replace(/['\\]/g,n=>yn[n])}')]`:`[${e._index}]`).join("")}`}function Bo(t){const e=[],n=/\['(.*?)'\]|\[(\d+)\]|\[\?\(@\._key=='(.*?)'\)\]/g;let s;for(;(s=n.exec(t))!==null;){if(s[1]!==void 0){const r=s[1].replace(/\\(\\|f|n|r|t|')/g,a=>vn[a]);e.push(r);continue}if(s[2]!==void 0){e.push(parseInt(s[2],10));continue}if(s[3]!==void 0){const r=s[3].replace(/\\(\\')/g,a=>vn[a]);e.push({_key:r,_index:-1});continue}}return e}function ta(t){return t.map(e=>{if(typeof e=="string"||typeof e=="number")return e;if(e._index!==-1)return e._index;throw new Error(`invalid segment:${JSON.stringify(e)}`)})}function Ho(t,e){if(!(e!=null&&e.mappings))return;const n=ea(ta(t));if(e.mappings[n]!==void 0)return{mapping:e.mappings[n],matchedPath:n,pathSuffix:""};const s=Object.entries(e.mappings).filter(([o])=>n.startsWith(o)).sort(([o],[c])=>c.length-o.length);if(s.length==0)return;const[r,a]=s[0],i=n.substring(r.length);return{mapping:a,matchedPath:r,pathSuffix:i}}function na(t){return t!==null&&Array.isArray(t)}function bn(t){return typeof t=="object"&&t!==null}function et(t,e,n=[]){if(na(t))return t.map((s,r)=>{if(bn(s)){const a=s._key;if(typeof a=="string")return et(s,e,n.concat({_key:a,_index:r}))}return et(s,e,n.concat(r))});if(bn(t)){if(t._type==="block"||t._type==="span"){const s={...t};return t._type==="block"?s.children=et(t.children,e,n.concat("children")):t._type==="span"&&(s.text=et(t.text,e,n.concat("text"))),s}return Object.fromEntries(Object.entries(t).map(([s,r])=>[s,et(r,e,n.concat(s))]))}return e(t,n)}const te=[];for(let t=0;t<256;++t)te.push((t+256).toString(16).slice(1));function ra(t,e=0){return(te[t[e+0]]+te[t[e+1]]+te[t[e+2]]+te[t[e+3]]+"-"+te[t[e+4]]+te[t[e+5]]+"-"+te[t[e+6]]+te[t[e+7]]+"-"+te[t[e+8]]+te[t[e+9]]+"-"+te[t[e+10]]+te[t[e+11]]+te[t[e+12]]+te[t[e+13]]+te[t[e+14]]+te[t[e+15]]).toLowerCase()}let kt;const sa=new Uint8Array(16);function aa(){if(!kt){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");kt=crypto.getRandomValues.bind(crypto)}return kt(sa)}const ia=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),xn={randomUUID:ia};function Je(t,e,n){var r;if(xn.randomUUID&&!t)return xn.randomUUID();t=t||{};const s=t.random??((r=t.rng)==null?void 0:r.call(t))??aa();if(s.length<16)throw new Error("Random bytes length must be >= 16");return s[6]=s[6]&15|64,s[8]=s[8]&63|128,ra(s)}const wn=t=>({context:e})=>{const{count:n,include:s,exclude:r,responseType:a="message.received"}=t;return{count:n,domain:e.domain,from:e.connectTo,include:s?Array.isArray(s)?s:[s]:[],exclude:r?Array.isArray(r)?r:[r]:[],responseType:a,target:e.target,to:e.name}},oa=t=>e=>{const{data:n}=e;return(t.include.length?t.include.includes(n.type):!0)&&(t.exclude.length?!t.exclude.includes(n.type):!0)&&n.domain===t.domain&&n.from===t.from&&n.to===t.to&&(!t.target||e.source===t.target)},ca=t=>e=>({type:t,message:e}),la=Mr(()=>Ut(window,"message")),or=t=>An(({input:e})=>la.pipe(t?Nt(t):It(),Mn(oa(e)),Nt(ca(e.responseType)),e.count?It(zs(e.count),Ir(n=>n),Bt(e.count)):It())),an="sanity/comlink",ua=3e3,da=500,at="comlink/response",vt="comlink/heartbeat",on="comlink/disconnect",cn="comlink/handshake/syn",ln="comlink/handshake/syn-ack",un="comlink/handshake/ack",pa=t=>e=>e.pipe(Bt(1),Nt(()=>{throw new Error(t)})),cr=()=>$n({types:{},actors:{listen:An(({input:t})=>{const e=t.signal?Ut(t.signal,"abort").pipe(pa(`Request ${t.requestId} aborted`)):kr,n=s=>{var r,a;return((r=s.data)==null?void 0:r.type)===at&&((a=s.data)==null?void 0:a.responseTo)===t.requestId&&!!s.source&&t.sources.has(s.source)};return Ut(window,"message").pipe(Mn(n),Bt(t.sources.size),$r(e))})},actions:{"send message":({context:t},e)=>{const{sources:n,targetOrigin:s}=t,{message:r}=e;n.forEach(a=>{a.postMessage(r,{targetOrigin:s})})},"on success":Ct(({context:t})=>t.parentRef,({context:t,self:e})=>{var n;return t.response&&((n=t.resolvable)==null||n.resolve(t.response)),{type:"request.success",requestId:e.id,response:t.response,responseTo:t.responseTo}}),"on fail":Ct(({context:t})=>t.parentRef,({context:t,self:e})=>{var n;return t.suppressWarnings||console.warn(`[@sanity/comlink] Received no response to message '${t.type}' on client '${t.from}' (ID: '${t.id}').`),(n=t.resolvable)==null||n.reject(new Error("No response received")),{type:"request.failed",requestId:e.id}}),"on abort":Ct(({context:t})=>t.parentRef,({context:t,self:e})=>{var n;return(n=t.resolvable)==null||n.reject(new Error("Request aborted")),{type:"request.aborted",requestId:e.id}})},guards:{expectsResponse:({context:t})=>t.expectResponse},delays:{initialTimeout:0,responseTimeout:({context:t})=>t.responseTimeout??ua}}).createMachine({context:({input:t})=>({channelId:t.channelId,data:t.data,domain:t.domain,expectResponse:t.expectResponse??!1,from:t.from,id:`msg-${Je()}`,parentRef:t.parentRef,resolvable:t.resolvable,response:null,responseTimeout:t.responseTimeout,responseTo:t.responseTo,signal:t.signal,sources:t.sources instanceof Set?t.sources:new Set([t.sources]),suppressWarnings:t.suppressWarnings,targetOrigin:t.targetOrigin,to:t.to,type:t.type}),initial:"idle",on:{abort:".aborted"},states:{idle:{after:{initialTimeout:[{target:"sending"}]}},sending:{entry:{type:"send message",params:({context:t})=>{const{channelId:e,data:n,domain:s,from:r,id:a,responseTo:i,to:o,type:c}=t;return{message:{channelId:e,data:n,domain:s,from:r,id:a,to:o,type:c,responseTo:i}}}},always:[{guard:"expectsResponse",target:"awaiting"},"success"]},awaiting:{invoke:{id:"listen for response",src:"listen",input:({context:t})=>({requestId:t.id,sources:t.sources,signal:t.signal}),onError:"aborted"},after:{responseTimeout:"failed"},on:{message:{actions:Wt({response:({event:t})=>t.data.data,responseTo:({event:t})=>t.data.responseTo}),target:"success"}}},failed:{type:"final",entry:"on fail"},success:{type:"final",entry:"on success"},aborted:{type:"final",entry:"on abort"}},output:({context:t,self:e})=>({requestId:e.id,response:t.response,responseTo:t.responseTo})}),fa=Cr(({sendBack:t,input:e})=>{const n=()=>{t(e.event)};e.immediate&&n();const s=setInterval(n,e.interval);return()=>{clearInterval(s)}}),bt=()=>$n({types:{},actors:{requestMachine:cr(),listen:or(),sendBackAtInterval:fa},actions:{"buffer message":dt(({enqueue:t})=>{t.assign({buffer:({event:e,context:n})=>(Me(e,"post"),[...n.buffer,e.data])}),t.emit(({event:e})=>(Me(e,"post"),{type:"buffer.added",message:e.data}))}),"create request":Wt({requests:({context:t,event:e,self:n,spawn:s})=>{Me(e,"request");const r=(Array.isArray(e.data)?e.data:[e.data]).map(a=>{const i=`req-${Je()}`;return s("requestMachine",{id:i,input:{channelId:t.channelId,data:a.data,domain:t.domain,expectResponse:a.expectResponse,from:t.name,parentRef:n,responseTo:a.responseTo,sources:t.target,targetOrigin:t.targetOrigin,to:t.connectTo,type:a.type}})});return[...t.requests,...r]}}),"emit received message":dt(({enqueue:t})=>{t.emit(({event:e})=>(Me(e,"message.received"),{type:"message",message:e.message.data}))}),"emit status":Rr((t,e)=>({type:"status",status:e.status})),"post message":Ze(({event:t})=>(Me(t,"post"),{type:"request",data:{data:t.data.data,expectResponse:!0,type:t.data.type}})),"remove request":dt(({context:t,enqueue:e,event:n})=>{Me(n,["request.success","request.failed","request.aborted"]),Tr(n.requestId),e.assign({requests:t.requests.filter(({id:s})=>s!==n.requestId)})}),respond:Ze(({event:t})=>(Me(t,"response"),{type:"request",data:{data:t.data,type:at,responseTo:t.respondTo}})),"send handshake ack":Ze({type:"request",data:{type:un}}),"send disconnect":Ze(()=>({type:"request",data:{type:on}})),"send handshake syn":Ze({type:"request",data:{type:cn}}),"send pending messages":dt(({enqueue:t})=>{t.raise(({context:e})=>({type:"request",data:e.buffer.map(({data:n,type:s})=>({data:n,type:s}))})),t.emit(({context:e})=>({type:"buffer.flushed",messages:e.buffer})),t.assign({buffer:[]})}),"set target":Wt({target:({event:t})=>(Me(t,"target.set"),t.target)})},guards:{"has target":({context:t})=>!!t.target,"should send heartbeats":({context:t})=>t.heartbeat}}).createMachine({id:"connection",context:({input:t})=>({id:t.id||`${t.name}-${Je()}`,buffer:[],channelId:`chn-${Je()}`,connectTo:t.connectTo,domain:t.domain??an,heartbeat:t.heartbeat??!1,name:t.name,requests:[],target:t.target,targetOrigin:t.targetOrigin}),on:{"target.set":{actions:"set target"},"request.success":{actions:"remove request"},"request.failed":{actions:"remove request"}},initial:"idle",states:{idle:{entry:[{type:"emit status",params:{status:"idle"}}],on:{connect:{target:"handshaking",guard:"has target"},post:{actions:"buffer message"}}},handshaking:{id:"handshaking",entry:[{type:"emit status",params:{status:"handshaking"}}],invoke:[{id:"send syn",src:"sendBackAtInterval",input:()=>({event:{type:"syn"},interval:da,immediate:!0})},{id:"listen for handshake",src:"listen",input:t=>wn({include:ln,count:1})(t)}],on:{syn:{actions:"send handshake syn"},request:{actions:"create request"},post:{actions:"buffer message"},"message.received":{target:"connected"},disconnect:{target:"disconnected"}},exit:"send handshake ack"},connected:{entry:["send pending messages",{type:"emit status",params:{status:"connected"}}],invoke:{id:"listen for messages",src:"listen",input:wn({exclude:[at,vt]})},on:{post:{actions:"post message"},request:{actions:"create request"},response:{actions:"respond"},"message.received":{actions:"emit received message"},disconnect:{target:"disconnected"}},initial:"heartbeat",states:{heartbeat:{initial:"checking",states:{checking:{always:{guard:"should send heartbeats",target:"sending"}},sending:{on:{"request.failed":{target:"#handshaking"}},invoke:{id:"send heartbeat",src:"sendBackAtInterval",input:()=>({event:{type:"post",data:{type:vt,data:void 0}},interval:2e3,immediate:!1})}}}}}},disconnected:{id:"disconnected",entry:["send disconnect",{type:"emit status",params:{status:"disconnected"}}],on:{request:{actions:"create request"},post:{actions:"buffer message"},connect:{target:"handshaking",guard:"has target"}}}}}),$t=(t,e=bt())=>{const n=t.id||`${t.name}-${Je()}`,s=Ar(e,{input:{...t,id:n}}),r=new Map,a=new Map,i=(y,h,b)=>{const g=r.get(y)||new Set;r.has(y)||r.set(y,g),g.add(h);const w=a.get(y);if(w){const P=(b==null?void 0:b.replay)??1;Array.from(w).slice(-P).forEach(async({data:_,id:S})=>{const R=await h(_);R&&s.send({type:"response",respondTo:S,data:R})}),a.delete(y)}return()=>{g.delete(h)}},o=()=>{s.send({type:"connect"})},c=()=>{s.send({type:"disconnect"})},u=(y,h)=>{const{unsubscribe:b}=s.on("status",g=>{h&&g.status!==h||y(g.status)});return b},p=y=>{s.send({type:"target.set",target:y})},d=(y,h)=>{const b={type:y,data:h};s.send({type:"post",data:b})};s.on("message",async({message:y})=>{const h=r.get(y.type);if(h){h.forEach(async g=>{const w=await g(y.data);w&&s.send({type:"response",respondTo:y.id,data:w})});return}const b=a.get(y.type);b?b.add(y):a.set(y.type,new Set([y]))});const v=()=>{s.stop()},m=()=>(s.start(),v);return{actor:s,connect:o,disconnect:c,id:n,name:t.name,machine:e,on:i,onStatus:u,post:d,setTarget:p,start:m,stop:v,get target(){return s.getSnapshot().context.target}}},At=t=>{t.disconnect(),setTimeout(()=>{t.stop()},0)},ha=()=>{},ma=t=>{const{targetOrigin:e}=t,n=new Set,s=new Set;return{addTarget:r=>{if(n.has(r))return ha;if(!n.size||!s.size)return n.add(r),s.forEach(i=>{i.connections.forEach(o=>{o.setTarget(r),o.connect()})}),()=>{n.delete(r),s.forEach(i=>{i.connections.forEach(o=>{o.target===r&&o.disconnect()})})};n.add(r);const a=new Set;return s.forEach(i=>{const o=$t({...i.input,target:r,targetOrigin:e},i.machine);a.add(o),i.connections.add(o),i.subscribers.forEach(({type:c,handler:u,unsubscribers:p})=>{p.push(o.on(c,u))}),i.internalEventSubscribers.forEach(({type:c,handler:u,unsubscribers:p})=>{p.push(o.actor.on(c,u).unsubscribe)}),i.statusSubscribers.forEach(({handler:c,unsubscribers:u})=>{u.push(o.onStatus(p=>c({connection:o.id,status:p})))}),o.start(),o.connect()}),()=>{n.delete(r),a.forEach(i=>{At(i),s.forEach(o=>{o.connections.delete(i)})})}},createChannel:(r,a=bt())=>{const i={connections:new Set,input:r,internalEventSubscribers:new Set,machine:a,statusSubscribers:new Set,subscribers:new Set};s.add(i);const{connections:o,internalEventSubscribers:c,statusSubscribers:u,subscribers:p}=i;if(n.size)n.forEach(b=>{const g=$t({...r,target:b,targetOrigin:e},a);o.add(g)});else{const b=$t({...r,targetOrigin:e},a);o.add(b)}const d=(...b)=>{const[g,w]=b;o.forEach(P=>{P.post(g,w)})},v=(b,g)=>{const w=[];o.forEach(_=>{w.push(_.on(b,g))});const P={type:b,handler:g,unsubscribers:w};return p.add(P),()=>{w.forEach(_=>_()),p.delete(P)}},m=(b,g)=>{const w=[];o.forEach(_=>{w.push(_.actor.on(b,g).unsubscribe)});const P={type:b,handler:g,unsubscribers:w};return c.add(P),()=>{w.forEach(_=>_()),c.delete(P)}},y=b=>{const g=[];o.forEach(P=>{g.push(P.onStatus(_=>b({connection:P.id,status:_})))});const w={handler:b,unsubscribers:g};return u.add(w),()=>{g.forEach(P=>P()),u.delete(w)}},h=()=>{const b=i.connections;b.forEach(At),b.clear(),s.delete(i)};return{on:v,onInternalEvent:m,onStatus:y,post:d,start:()=>(o.forEach(b=>{b.start(),b.connect()}),h),stop:h}},destroy:()=>{s.forEach(({connections:r})=>{r.forEach(At),r.clear()}),s.clear(),n.clear()}}},ga={"handshake/syn":cn,"handshake/syn-ack":ln,"handshake/ack":un,"channel/response":at,"channel/heartbeat":vt,"channel/disconnect":on,"overlay/focus":"visual-editing/focus","overlay/navigate":"visual-editing/navigate","overlay/toggle":"visual-editing/toggle","presentation/toggleOverlay":"presentation/toggle-overlay"},ya={[cn]:"handshake/syn",[ln]:"handshake/syn-ack",[un]:"handshake/ack",[at]:"channel/response",[vt]:"channel/heartbeat",[on]:"channel/disconnect","visual-editing/focus":"overlay/focus","visual-editing/navigate":"overlay/navigate","visual-editing/toggle":"overlay/toggle","presentation/toggle-overlay":"presentation/toggleOverlay"},va=t=>{const{data:e}=t;return e&&typeof e=="object"&&"domain"in e&&"type"in e&&"from"in e&&"to"in e&&(e.domain==="sanity/channels"&&(e.domain=an),e.to==="overlays"&&(e.to="visual-editing"),e.from==="overlays"&&(e.from="visual-editing"),e.channelId=e.connectionId,delete e.connectionId,e.type=ga[e.type]??e.type),t},ba=t=>{const{channelId:e,...n}=t,s={...n,connectionId:e};return s.domain===an&&(s.domain="sanity/channels"),s.to==="visual-editing"&&(s.to="overlays"),s.from==="visual-editing"&&(s.from="overlays"),s.type=ya[s.type]??s.type,s.type==="channel/response"&&s.responseTo&&!s.data&&(s.data={responseTo:s.responseTo}),(s.type==="handshake/syn"||s.type==="handshake/syn-ack"||s.type==="handshake/ack")&&(s.data={id:s.connectionId}),s},xa=({context:t},e)=>{const{sources:n,targetOrigin:s}=t,r=ba(e.message);n.forEach(a=>{a.postMessage(r,{targetOrigin:s})})},Pn=()=>({listen:or(va),requestMachine:cr().provide({actions:{"send message":xa}})});function wa(t){const e=new URL(t),{searchParams:n}=e;return n.delete(en),n.delete(Zt),n.delete(rt),n.delete(nt),n.delete(tn),e}function Pa(t,e,n,s){const r=new URL(t),{searchParams:a}=r;return e&&(a.set(Zt,e),a.set(en,n)),a.set(rt,s),r}function lr(){if(typeof crypto<"u"){const t=new Uint8Array(16);crypto.getRandomValues(t);let e="";for(let n=0;n<t.length;n++)e+=t[n].toString(16).padStart(2,"0");return e=btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/[=]+$/,""),e}return Math.random().toString(36).slice(2)}async function Sa(t,e,n,s){const r=t.withConfig({apiVersion:_t}),a=lr(),i=r.patch(Le).set({secret:a,studioUrl:n,userId:s});return await r.transaction().createIfNotExists({_id:Le,_type:Xe,source:e,studioUrl:n,userId:s}).patch(i).commit({tag:nn}),{secret:a}}async function _a(t,e,n,s){const r=t.withConfig({apiVersion:_t}),a=r.patch(Le).set({secret:null,studioUrl:n,userId:s});await r.transaction().createIfNotExists({_id:Le,_type:Xe,source:e,studioUrl:n,userId:s}).patch(a).commit({tag:nn})}function ja(t){for(var e=[],n=0;n<t.length;){var s=t[n];if(s==="*"||s==="+"||s==="?"){e.push({type:"MODIFIER",index:n,value:t[n++]});continue}if(s==="\\"){e.push({type:"ESCAPED_CHAR",index:n++,value:t[n++]});continue}if(s==="{"){e.push({type:"OPEN",index:n,value:t[n++]});continue}if(s==="}"){e.push({type:"CLOSE",index:n,value:t[n++]});continue}if(s===":"){for(var r="",a=n+1;a<t.length;){var i=t.charCodeAt(a);if(i>=48&&i<=57||i>=65&&i<=90||i>=97&&i<=122||i===95){r+=t[a++];continue}break}if(!r)throw new TypeError("Missing parameter name at ".concat(n));e.push({type:"NAME",index:n,value:r}),n=a;continue}if(s==="("){var o=1,c="",a=n+1;if(t[a]==="?")throw new TypeError('Pattern cannot start with "?" at '.concat(a));for(;a<t.length;){if(t[a]==="\\"){c+=t[a++]+t[a++];continue}if(t[a]===")"){if(o--,o===0){a++;break}}else if(t[a]==="("&&(o++,t[a+1]!=="?"))throw new TypeError("Capturing groups are not allowed at ".concat(a));c+=t[a++]}if(o)throw new TypeError("Unbalanced pattern at ".concat(n));if(!c)throw new TypeError("Missing pattern at ".concat(n));e.push({type:"PATTERN",index:n,value:c}),n=a;continue}e.push({type:"CHAR",index:n,value:t[n++]})}return e.push({type:"END",index:n,value:""}),e}function Ea(t,e){e===void 0&&(e={});for(var n=ja(t),s=e.prefixes,r=s===void 0?"./":s,a=e.delimiter,i=a===void 0?"/#?":a,o=[],c=0,u=0,p="",d=function(j){if(u<n.length&&n[u].type===j)return n[u++].value},v=function(j){var x=d(j);if(x!==void 0)return x;var I=n[u],A=I.type,E=I.index;throw new TypeError("Unexpected ".concat(A," at ").concat(E,", expected ").concat(j))},m=function(){for(var j="",x;x=d("CHAR")||d("ESCAPED_CHAR");)j+=x;return j},y=function(j){for(var x=0,I=i;x<I.length;x++){var A=I[x];if(j.indexOf(A)>-1)return!0}return!1},h=function(j){var x=o[o.length-1],I=j||(x&&typeof x=="string"?x:"");if(x&&!I)throw new TypeError('Must have text between two parameters, missing text after "'.concat(x.name,'"'));return!I||y(I)?"[^".concat(Oe(i),"]+?"):"(?:(?!".concat(Oe(I),")[^").concat(Oe(i),"])+?")};u<n.length;){var b=d("CHAR"),g=d("NAME"),w=d("PATTERN");if(g||w){var P=b||"";r.indexOf(P)===-1&&(p+=P,P=""),p&&(o.push(p),p=""),o.push({name:g||c++,prefix:P,suffix:"",pattern:w||h(P),modifier:d("MODIFIER")||""});continue}var _=b||d("ESCAPED_CHAR");if(_){p+=_;continue}p&&(o.push(p),p="");var S=d("OPEN");if(S){var P=m(),R=d("NAME")||"",T=d("PATTERN")||"",C=m();v("CLOSE"),o.push({name:R||(T?c++:""),pattern:R&&!T?h(P):T,prefix:P,suffix:C,modifier:d("MODIFIER")||""});continue}v("END")}return o}function Ra(t,e){var n=[],s=dr(t,n,e);return Ta(s,n,e)}function Ta(t,e,n){n===void 0&&(n={});var s=n.decode,r=s===void 0?function(a){return a}:s;return function(a){var i=t.exec(a);if(!i)return!1;for(var o=i[0],c=i.index,u=Object.create(null),p=function(v){if(i[v]===void 0)return"continue";var m=e[v-1];m.modifier==="*"||m.modifier==="+"?u[m.name]=i[v].split(m.prefix+m.suffix).map(function(y){return r(y,m)}):u[m.name]=r(i[v],m)},d=1;d<i.length;d++)p(d);return{path:o,index:c,params:u}}}function Oe(t){return t.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function ur(t){return t&&t.sensitive?"":"i"}function Ca(t,e){if(!e)return t;for(var n=/\((?:\?<(.*?)>)?(?!\?)/g,s=0,r=n.exec(t.source);r;)e.push({name:r[1]||s++,prefix:"",suffix:"",modifier:"",pattern:""}),r=n.exec(t.source);return t}function Ia(t,e,n){var s=t.map(function(r){return dr(r,e,n).source});return new RegExp("(?:".concat(s.join("|"),")"),ur(n))}function ka(t,e,n){return $a(Ea(t,n),e,n)}function $a(t,e,n){n===void 0&&(n={});for(var s=n.strict,r=s===void 0?!1:s,a=n.start,i=a===void 0?!0:a,o=n.end,c=o===void 0?!0:o,u=n.encode,p=u===void 0?function(x){return x}:u,d=n.delimiter,v=d===void 0?"/#?":d,m=n.endsWith,y=m===void 0?"":m,h="[".concat(Oe(y),"]|$"),b="[".concat(Oe(v),"]"),g=i?"^":"",w=0,P=t;w<P.length;w++){var _=P[w];if(typeof _=="string")g+=Oe(p(_));else{var S=Oe(p(_.prefix)),R=Oe(p(_.suffix));if(_.pattern)if(e&&e.push(_),S||R)if(_.modifier==="+"||_.modifier==="*"){var T=_.modifier==="*"?"?":"";g+="(?:".concat(S,"((?:").concat(_.pattern,")(?:").concat(R).concat(S,"(?:").concat(_.pattern,"))*)").concat(R,")").concat(T)}else g+="(?:".concat(S,"(").concat(_.pattern,")").concat(R,")").concat(_.modifier);else{if(_.modifier==="+"||_.modifier==="*")throw new TypeError('Can not repeat "'.concat(_.name,'" without a prefix and suffix'));g+="(".concat(_.pattern,")").concat(_.modifier)}else g+="(?:".concat(S).concat(R,")").concat(_.modifier)}}if(c)r||(g+="".concat(b,"?")),g+=n.endsWith?"(?=".concat(h,")"):"$";else{var C=t[t.length-1],j=typeof C=="string"?b.indexOf(C[C.length-1])>-1:C===void 0;r||(g+="(?:".concat(b,"(?=").concat(h,"))?")),j||(g+="(?=".concat(b,"|").concat(h,")"))}return new RegExp(g,ur(n))}function dr(t,e,n){return t instanceof RegExp?Ca(t,e):Array.isArray(t)?Ia(t,e,n):ka(t,e,n)}async function Aa(t,e,n,s,r=On()){const a=t.withConfig({apiVersion:_t});try{const i=new Date(Date.now()+1e3*Zn),o=`drafts.${r}`,c=lr(),u=a.patch(o).set({secret:c,source:e,studioUrl:n,userId:s});return await a.transaction().createOrReplace({_id:o,_type:Yt}).patch(u).commit({tag:nn}),{secret:c,expiresAt:i}}finally{try{await a.delete({query:Ns})}catch(i){console.error("Failed to delete expired secrets",i)}}}function Ma(t){const{draftMode:e,previewMode:n,origin:s=typeof location>"u"?"https://localhost":location.origin}=t,r=(n==null?void 0:n.enable)||(e==null?void 0:e.enable);let{preview:a="/"}=t;const i=new URL(a,s),o=r?new URL(r,s):void 0;return async c=>{try{if(c.previewSearchParam){const p=new URL(c.previewSearchParam,i);p.origin===i.origin&&(a=`${p.pathname}${p.search}`)}}catch{}typeof location<"u"&&location.origin===i.origin&&c.studioBasePath&&(a.startsWith(`${c.studioBasePath}/`)||a===c.studioBasePath)&&(a=t.preview||"/");const u=new URL(a,i);if(o){const p=new URL(o),{searchParams:d}=p;return d.set(Zt,c.previewUrlSecret),d.set(rt,c.studioPreviewPerspective),u.pathname!==p.pathname&&d.set(en,`${u.pathname}${u.search}`),p.toString()}return u.toString()}}const Oa=t=>typeof t=="object"&&typeof t.then=="function",pt=[];function La(t,e,n=(s,r)=>s===r){if(t===e)return!0;if(!t||!e)return!1;const s=t.length;if(e.length!==s)return!1;for(let r=0;r<s;r++)if(!n(t[r],e[r]))return!1;return!0}function za(t,e=null,n=!1,s={}){e===null&&(e=[t]);for(const a of pt)if(La(e,a.keys,a.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(a,"error"))throw a.error;if(Object.prototype.hasOwnProperty.call(a,"response"))return s.lifespan&&s.lifespan>0&&(a.timeout&&clearTimeout(a.timeout),a.timeout=setTimeout(a.remove,s.lifespan)),a.response;if(!n)throw a.promise}const r={keys:e,equal:s.equal,remove:()=>{const a=pt.indexOf(r);a!==-1&&pt.splice(a,1)},promise:(Oa(t)?t:t(...e)).then(a=>{r.response=a,s.lifespan&&s.lifespan>0&&(r.timeout=setTimeout(r.remove,s.lifespan))}).catch(a=>r.error=a)};if(pt.push(r),!n)throw r.promise}const pr=(t,e,n)=>za(t,e,!1,n);function Da(t,e){let n=new AbortController,s=[];async function r(i,o){const{result:c,syncTags:u}=await t.fetch(Vs,{},{filterResponse:!1,lastLiveEventId:i,tag:"preview-url-secret.fetch-vercel-bypass-protection-secret"});Array.isArray(u)&&(s=u),o.aborted||e(c)}const a=t.live.events().subscribe({next:i=>{i.type==="message"&&(n.abort(),n=new AbortController,i.tags.some(o=>s.includes(o))&&r(i.id,n.signal))},error:i=>console.error(i)});return r(null,n.signal),()=>{a.unsubscribe(),n.abort()}}const Wa=t=>{const e=z.c(3),{comlink:n}=t;let s,r;return e[0]!==n?(s=()=>n.on("visual-editing/features",Ua),r=[n],e[0]=n,e[1]=s,e[2]=r):(s=e[1],r=e[2]),f.useEffect(s,r),null};var Na=f.memo(Wa);function Ua(){return{features:{optimistic:!0}}}function fr(t,e){let n;return(...s)=>{clearTimeout(n),n=setTimeout(()=>{t.apply(t,s)},e)}}const qa=function(t){const e=z.c(14),{comlink:n,children:s}=t;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r={},e[0]=r):r=e[0];const a=f.useRef(r);let i,o;e[1]!==n?(i=()=>n==null?void 0:n.on("visual-editing/shared-state",()=>({state:a.current})),o=[n],e[1]=n,e[2]=i,e[3]=o):(i=e[2],o=e[3]),f.useEffect(i,o);let c;e[4]!==n?(c=(b,g)=>{a.current[b]=g,n==null||n.post("presentation/shared-state",{key:b,value:g})},e[4]=n,e[5]=c):c=e[5];const u=c;let p;e[6]!==n?(p=b=>{n==null||n.post("presentation/shared-state",{key:b}),delete a.current[b]},e[6]=n,e[7]=p):p=e[7];const d=p;let v,m;e[8]!==d||e[9]!==u?(m={removeValue:d,setValue:u},e[8]=d,e[9]=u,e[10]=m):m=e[10],v=m;const y=v;let h;return e[11]!==s||e[12]!==y?(h=l.jsx(ts.Provider,{value:y,children:s}),e[11]=s,e[12]=y,e[13]=h):h=e[13],h},Va=ue.div`
  overflow: hidden;
  flex-basis: 0;
  flex-shrink: 1;
`,dn=function(t){const e=z.c(15),{children:n,defaultSize:s,id:r,minWidth:a,maxWidth:i,order:o}=t,c=s===void 0?null:s,u=o===void 0?0:o,p=f.useContext(Qt);if(p===null)throw Error("Panel components must be rendered within a PanelGroup container");const{getPanelStyle:d,registerElement:v,unregisterElement:m}=p;let y;e[0]!==d||e[1]!==r?(y=d(r),e[0]=d,e[1]=r,e[2]=y):y=e[2];const h=y;let b,g;e[3]!==c||e[4]!==r||e[5]!==i||e[6]!==a||e[7]!==u||e[8]!==v||e[9]!==m?(b=()=>(v(r,{id:r,type:"panel",defaultSize:c,maxWidth:i??null,minWidth:a??0,order:u}),()=>{m(r)}),g=[r,c,u,i,a,v,m],e[3]=c,e[4]=r,e[5]=i,e[6]=a,e[7]=u,e[8]=v,e[9]=m,e[10]=b,e[11]=g):(b=e[10],g=e[11]),f.useLayoutEffect(b,g);let w;return e[12]!==n||e[13]!==h?(w=l.jsx(Va,{style:h,children:n}),e[12]=n,e[13]=h,e[14]=w):w=e[14],w},hr="presentation/panels",mr=()=>JSON.parse(localStorage.getItem(hr)||"{}"),Fa=t=>{localStorage.setItem(hr,JSON.stringify(t))},gr=t=>t.map(e=>[e.id,e.order].join(":")).join(",");function Ba(){const t=z.c(1);let e;const n=Ka,s=Ha;let r;if(t[0]===Symbol.for("react.memo_cache_sentinel")){const a=fr(s,100);r={get:n,set:s,setDebounced:a},t[0]=r}else r=t[0];return e=r,e}function Ha(t,e){const n=mr(),s=gr(t),r={...n,[s]:e};Fa(r)}function Ka(t){const e=mr(),n=gr(t);return Array.isArray(e[n])&&e[n].some(Ga)?void 0:e[n]}function Ga(t){return t===null}function Vt(t,e,n){const{maxWidth:s,minWidth:r}=t,a=s==null?100:s/n*100,i=r/n*100;return Math.min(a,Math.max(i,e))}function Xa(t,e,n,s,r,a){const{panels:i,widths:o}=r,{widths:c}=a,u=c||o,p=[...u];{const y=t<0?s:n,h=i.findIndex(w=>w.id===y.id),b=u[h],g=Vt(y,b+Math.abs(t),e);if(b===g)return u;t=t<0?b-g:g-b}let d=0,v=t<0?n:s,m=i.findIndex(y=>y.id===v.id);for(;;){const y=i[m],h=u[m],b=Math.abs(t)-Math.abs(d),g=Vt(y,h-b,e);if(h!==g&&(d+=h-g,p[m]=g,d.toPrecision(10).localeCompare(Math.abs(t).toPrecision(10),void 0,{numeric:!0})>=0))break;if(t<0){if(--m<0)break}else if(++m>=i.length)break}return d===0?u:(v=t<0?s:n,m=i.findIndex(y=>y.id===v.id),p[m]=u[m]+d,p)}function Ja(t,e,n){if(t.length===1)return"100";const s=t.findIndex(a=>a.id===e),r=n[s];return r==null?"0":r.toPrecision(10)}function Sn(t,e,n=0,s=null){const r=t.clientX,a=(s||e.getBoundingClientRect()).left;return r-a-n}function Mt(t){return t.type==="panel"}function _n(t){return t.type==="resizer"}function jn(t){return Array.from(t.values()).sort(({order:e},{order:n})=>e==null&&n==null?0:e==null?-1:n==null?1:e-n)}function En(t,e,n){const s=e.reduce((i,o)=>i+o,0),r=[...e].map(i=>i/s*100);let a=0;for(let i=0;i<t.length;i++){const o=t[i],c=r[i],u=Vt(o,c,n);c!=u&&(a+=c-u,r[i]=u)}if(a.toFixed(3)!=="0.000")for(let i=0;i<t.length;i++){const o=t[i];let{maxWidth:c,minWidth:u}=o;u=u/n*100,c!=null&&(c=c/n*100);const p=Math.min(c??100,Math.max(u,r[i]+a));if(p!==r[i]&&(a-=p-r[i],r[i]=p,Math.abs(a).toFixed(3)==="0.000"))break}return r}function Qa(t){let e=t.length,n=100;const s=t.map(a=>a.defaultSize?(n-=a.defaultSize,e-=1,a.defaultSize):null),r=n/e;return s.map(a=>a===null?r:a)}const Ya=ue.div`
  display: flex;
  flex-direction: row;
  height: 100%;
  overflow: hidden;
  width: 100%;
`,Za=function(t){const e=z.c(46),{children:n}=t,s=f.useRef(null);let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=new Map,e[0]=r):r=e[0];const[a,i]=f.useState(r);let o,c;e[1]!==a?(c=jn(a).filter(Mt),e[1]=a,e[2]=c):c=e[2],o=c;const u=o;let p;e[3]===Symbol.for("react.memo_cache_sentinel")?(p=[],e[3]=p):p=e[3];const[d,v]=f.useState(p),[m,y]=f.useState(null);let h;e[4]!==a||e[5]!==u||e[6]!==d?(h={elements:a,panels:u,widths:d},e[4]=a,e[5]=u,e[6]=d,e[7]=h):h=e[7];const b=f.useRef(h);let g;e[8]!==m||e[9]!==u||e[10]!==d?(g=B=>({flexGrow:Ja(u,B,d),pointerEvents:m===null?void 0:"none"}),e[8]=m,e[9]=u,e[10]=d,e[11]=g):g=e[11];const w=g;let P;e[12]===Symbol.for("react.memo_cache_sentinel")?(P=(B,H)=>{i(F=>{if(F.has(B))return F;const X=new Map(F);return X.set(B,H),X})},e[12]=P):P=e[12];const _=P;let S;e[13]===Symbol.for("react.memo_cache_sentinel")?(S=B=>{i(H=>{if(!H.has(B))return H;const F=new Map(H);return F.delete(B),F})},e[13]=S):S=e[13];const R=S;let T;e[14]===Symbol.for("react.memo_cache_sentinel")?(T={containerWidth:window.innerWidth,dragOffset:0,panelAfter:null,panelBefore:null,resizerIndex:-1,resizerRect:null,startX:0,widths:[]},e[14]=T):T=e[14];const C=f.useRef(T);let j;e[15]!==a?(j=(B,H)=>{const F=jn(a),X=F.findIndex(Q=>Q.id===B),ce=a.get(B);if(!ce||!_n(ce))return;const ee=ce.el.current;ee&&(C.current={resizerIndex:X,panelBefore:F.reduce((Q,Y,ie)=>Mt(Y)&&ie<X?Y:Q,null),panelAfter:F.reduce((Q,Y,ie)=>Q===null&&Mt(Y)&&ie>X?Y:Q,null),containerWidth:window.innerWidth,startX:H.pageX,dragOffset:Sn(H,ee),resizerRect:ee.getBoundingClientRect(),widths:b.current.widths},y(B))},e[15]=a,e[16]=j):j=e[16];const x=j;let I;e[17]===Symbol.for("react.memo_cache_sentinel")?(I=()=>{y(null)},e[17]=I):I=e[17];const A=I;let E;e[18]!==a?(E=(B,H)=>{H.preventDefault(),H.stopPropagation();const{containerWidth:F,dragOffset:X,panelBefore:ce,panelAfter:ee,resizerRect:Q}=C.current;if(ce==null||ee==null)return;const Y=a.get(B);if(!Y||!_n(Y))return;const ie=Y.el.current;if(!ie)return;const pe=Sn(H,ie,X,Q);if(pe===0)return;const{widths:ve}=b.current,fe=s.current.getBoundingClientRect(),be=pe/fe.width*100,he=Xa(be,F,ce,ee,b.current,C.current);ve.some((xe,me)=>xe!==he[me])&&v(he)},e[18]=a,e[19]=E):E=e[19];const M=E;let k,O;e[20]!==a||e[21]!==u||e[22]!==d?(k=()=>{b.current.elements=a,b.current.panels=u,b.current.widths=d},O=[a,u,d],e[20]=a,e[21]=u,e[22]=d,e[23]=k,e[24]=O):(k=e[23],O=e[24]),f.useLayoutEffect(k,O);const D=Ba();let U,q;e[25]!==u||e[26]!==D?(U=()=>{const{widths:B}=b.current;if(B.length===u.length)return;const H=D.get(u);if(H){const X=En(u,H,window.innerWidth);v(X);return}const F=Qa(u);v(F)},q=[D,u],e[25]=u,e[26]=D,e[27]=U,e[28]=q):(U=e[27],q=e[28]),f.useLayoutEffect(U,q);let G,K;e[29]!==u||e[30]!==D||e[31]!==d?(G=()=>{d.length&&D.setDebounced(u,d)},K=[D,u,d],e[29]=u,e[30]=D,e[31]=d,e[32]=G,e[33]=K):(G=e[32],K=e[33]),f.useEffect(G,K);let Z,re;e[34]===Symbol.for("react.memo_cache_sentinel")?(Z=()=>{const B=new ResizeObserver(()=>{const{panels:H,widths:F}=b.current,X=En(H,F,window.innerWidth);F.some((ce,ee)=>ce!==X[ee])&&v(X)});return B.observe(s.current),()=>{B.disconnect()}},re=[],e[34]=Z,e[35]=re):(Z=e[34],re=e[35]),f.useLayoutEffect(Z,re);let de,L;e[36]!==m||e[37]!==M||e[38]!==w||e[39]!==x?(L={activeResizer:m,drag:M,getPanelStyle:w,registerElement:_,startDragging:x,stopDragging:A,unregisterElement:R},e[36]=m,e[37]=M,e[38]=w,e[39]=x,e[40]=L):L=e[40],de=L;const se=de;let ae;e[41]!==n?(ae=l.jsx(Ya,{ref:s,children:n}),e[41]=n,e[42]=ae):ae=e[42];let oe;return e[43]!==se||e[44]!==ae?(oe=l.jsx(Qt.Provider,{value:se,children:ae}),e[43]=se,e[44]=ae,e[45]=oe):oe=e[45],oe};function pn(t){const e=z.c(37);let n,s,r,a,i;e[0]!==t?({children:n,message:s,onRetry:a,onContinueAnyway:r,...i}=t,e[0]=t,e[1]=n,e[2]=s,e[3]=r,e[4]=a,e[5]=i):(n=e[1],s=e[2],r=e[3],a=e[4],i=e[5]);const{t:o}=Pe(Se);let c;e[6]!==o?(c=o("error-card.retry-button.text"),e[6]=o,e[7]=c):c=e[7];let u;e[8]!==a||e[9]!==c?(u=l.jsx(we,{mode:"ghost",onClick:a,text:c}),e[8]=a,e[9]=c,e[10]=u):u=e[10];const p=u;let d;e[11]!==o?(d=o("error-card.continue-button.text"),e[11]=o,e[12]=d):d=e[12];let v;e[13]!==r||e[14]!==d?(v=l.jsx(we,{mode:"ghost",tone:"critical",onClick:r,text:d}),e[13]=r,e[14]=d,e[15]=v):v=e[15];const m=v;let y;e[16]!==o?(y=o("error-card.title"),e[16]=o,e[17]=y):y=e[17];let h;e[18]!==y?(h=l.jsx(V,{size:1,weight:"semibold",children:y}),e[18]=y,e[19]=h):h=e[19];let b;e[20]!==s?(b=l.jsx(V,{muted:!0,size:1,children:s}),e[20]=s,e[21]=b):b=e[21];let g;e[22]!==h||e[23]!==b?(g=l.jsxs(Re,{space:3,children:[h,b]}),e[22]=h,e[23]=b,e[24]=g):g=e[24];let w;e[25]!==m||e[26]!==r||e[27]!==a||e[28]!==p?(w=a&&r?l.jsxs(ns,{space:2,children:[p,m]}):a?l.jsx(ne,{children:p}):r?l.jsx(ne,{children:m}):null,e[25]=m,e[26]=r,e[27]=a,e[28]=p,e[29]=w):w=e[29];let P;e[30]!==n||e[31]!==g||e[32]!==w?(P=l.jsx(J,{align:"center",height:"fill",justify:"center",children:l.jsx(rs,{padding:4,sizing:"border",width:0,children:l.jsxs(Re,{space:4,children:[g,n,w]})})}),e[30]=n,e[31]=g,e[32]=w,e[33]=P):P=e[33];let _;return e[34]!==i||e[35]!==P?(_=l.jsx(le,{height:"fill",...i,children:P}),e[34]=i,e[35]=P,e[36]=_):_=e[36],_}function ei(t={}){const e=Object.entries(t).map(([n,s])=>`${n}=${s}`).join("&");return e.length?`?${e}`:""}function ti(t){const e=["comment","inspect","instruction","pathKey","rev","since","template","view"],n=Object.entries(t).filter(([s])=>e.includes(s)).reduce((s,[r,a])=>a==null?s:{...s,[r]:a},{});return ei(n)}const ni=f.forwardRef(function(t,e){const n=z.c(11);let s,r;n[0]!==t?({searchParams:r,...s}=t,n[0]=t,n[1]=s,n[2]=r):(s=n[1],r=n[2]);let a;n[3]!==r?(a=Object.entries(r),n[3]=r,n[4]=a):a=n[4];let i;n[5]!==a?(i={type:void 0,_searchParams:a},n[5]=a,n[6]=i):i=n[6];let o;return n[7]!==e||n[8]!==s||n[9]!==i?(o=l.jsx(wt,{...s,ref:e,state:i,title:void 0}),n[7]=e,n[8]=s,n[9]=i,n[10]=o):o=n[10],o}),ri=f.forwardRef(function(t,e){const n=z.c(15);let s,r,a,i;if(n[0]!==t){const{documentId:p,documentType:d,parentRefPath:v,template:m,searchParams:y,...h}=t;s=p,r=d,i=y,a=h,n[0]=t,n[1]=s,n[2]=r,n[3]=a,n[4]=i}else s=n[1],r=n[2],a=n[3],i=n[4];let o;n[5]!==i?(o=Object.entries(i),n[5]=i,n[6]=o):o=n[6];let c;n[7]!==s||n[8]!==r||n[9]!==o?(c={id:s,type:r,_searchParams:o},n[7]=s,n[8]=r,n[9]=o,n[10]=c):c=n[10];let u;return n[11]!==e||n[12]!==a||n[13]!==c?(u=l.jsx(wt,{...a,ref:e,state:c,title:void 0}),n[11]=e,n[12]=a,n[13]=c,n[14]=u):u=n[14],u});function yr(t){const e=z.c(26),{children:n,onStructureParams:s,structureParams:r,searchParams:a,refs:i}=t,{state:o,resolvePathFromState:c}=Xt();let u;e[0]!==o._searchParams?(u=Object.fromEntries(o._searchParams||[]),e[0]=o._searchParams,e[1]=u):u=e[1];const p=Hn(u);let d;e[2]!==c||e[3]!==p||e[4]!==o?(d=C=>{const j=c(o),x=ti({...p,...C});return`${j}${x}`},e[2]=c,e[3]=p,e[4]=o,e[5]=d):d=e[5];const v=d;let m,y;e[6]===Symbol.for("react.memo_cache_sentinel")?(y={},e[6]=y):y=e[6];const h=r;let b;e[7]===Symbol.for("react.memo_cache_sentinel")?(b=[],e[7]=b):b=e[7];let g;e[8]!==i||e[9]!==a?(g=C=>{const{childId:j,...x}=C,I=i==null?void 0:i.find(A=>A._id===j||St(A._id)===j);return I?l.jsx(wt,{...x,state:{id:j,type:I._type,_searchParams:Object.entries(a)}}):l.jsx("div",{...x})},e[8]=i,e[9]=a,e[10]=g):g=e[10];let w,P;e[11]!==a?(w=C=>l.jsx(ni,{...C,searchParams:a}),P=C=>l.jsx(ri,{...C,searchParams:a}),e[11]=a,e[12]=w,e[13]=P):(w=e[12],P=e[13]);let _;e[14]!==s?(_=C=>{s({...C,inspect:C.inspect??void 0})},e[14]=s,e[15]=_):_=e[15];let S;e[16]!==v||e[17]!==h||e[18]!==g||e[19]!==w||e[20]!==P||e[21]!==_?(S={index:0,groupIndex:0,siblingIndex:0,payload:y,params:h,hasGroupSiblings:!1,groupLength:1,routerPanesState:b,ChildLink:g,BackLink:w,ReferenceChildLink:P,ParameterizedLink:pi,closeCurrentAndAfter:di,handleEditReference:ui,replaceCurrent:li,closeCurrent:ci,duplicateCurrent:oi,setView:ii,setParams:_,setPayload:ai,navigateIntent:si,createPathWithParams:v},e[16]=v,e[17]=h,e[18]=g,e[19]=w,e[20]=P,e[21]=_,e[22]=S):S=e[22],m=S;const R=m;let T;return e[23]!==n||e[24]!==R?(T=l.jsx(Cs.Provider,{value:R,children:n}),e[23]=n,e[24]=R,e[25]=T):T=e[25],T}function si(t,e,n){console.warn("navigateIntent",t,e,n)}function ai(t){console.warn("setPayload",t)}function ii(t){console.warn("setView",t)}function oi(t){console.warn("duplicateCurrent",t)}function ci(){console.warn("closeCurrent")}function li(t){console.warn("replaceCurrent",t)}function ui(t){console.warn("handleEditReference",t)}function di(){console.warn("closeCurrentAndAfter")}function pi(){throw new Error("ParameterizedLink not implemented")}const fi=ue(Gn)`
  height: 100%;
`,hi=ue(J)`
  & > div {
    min-width: none !important;
    max-width: none !important;
  }
`,mi=ue(gt)`
  white-space: pre-wrap;
`;function gi(t){var j,x,I,A;const e=z.c(33),{mainDocumentState:n,onStructureParams:s,searchParams:r,refs:a}=t,{t:i}=Pe(Se),{devMode:o}=Kt();let c,u;if(e[0]!==((j=n==null?void 0:n.document)==null?void 0:j._id)||e[1]!==a){let E;e[3]!==((x=n==null?void 0:n.document)==null?void 0:x._id)?(E=M=>{var k;return St(M._id)!==((k=n==null?void 0:n.document)==null?void 0:k._id)},e[3]=(I=n==null?void 0:n.document)==null?void 0:I._id,e[4]=E):E=e[4],u=a.filter(E).map(vi),e[0]=(A=n==null?void 0:n.document)==null?void 0:A._id,e[1]=a,e[2]=u}else u=e[2];c=u;const p=c;let d,v;e[5]!==p?(v={filter:"_id in $ids",params:{ids:p}},e[5]=p,e[6]=v):v=e[6];let m;e[7]!==i?(m=i("document-list-pane.document-list.title"),e[7]=i,e[8]=m):m=e[8];let y;e[9]!==v||e[10]!==m?(y={id:"$root",options:v,schemaTypeName:"",title:m,type:"documentList"},e[9]=v,e[10]=m,e[11]=y):y=e[11],d=y;const h=d,[b,g]=f.useState(null);let w;e[12]===Symbol.for("react.memo_cache_sentinel")?(w=()=>g(null),e[12]=w):w=e[12];const P=w,[_]=f.useState(yi);let S;e[13]===Symbol.for("react.memo_cache_sentinel")?(S=()=>g(null),e[13]=S):S=e[13];let R;if(e[14]!==a?(R=[a],e[14]=a,e[15]=R):R=e[15],f.useEffect(S,R),b){let E;e[16]!==i?(E=i("document-list-pane.error.text"),e[16]=i,e[17]=E):E=e[17];let M;e[18]!==o||e[19]!==b||e[20]!==i?(M=o&&l.jsx(le,{overflow:"auto",padding:3,radius:2,tone:"critical",children:l.jsxs(Re,{space:3,children:[l.jsx(mt,{muted:!0,size:0,children:i("presentation-error.label")}),l.jsx(mi,{size:1,children:b.error.message})]})}),e[18]=o,e[19]=b,e[20]=i,e[21]=M):M=e[21];let k;return e[22]!==M||e[23]!==E?(k=l.jsx(pn,{flex:1,message:E,onRetry:P,children:M}),e[22]=M,e[23]=E,e[24]=k):k=e[24],k}let T;e[25]!==h?(T=l.jsx(hi,{direction:"column",flex:1,children:l.jsx(Ts,{index:0,itemId:"$root",pane:h,paneKey:"$root"})}),e[25]=h,e[26]=T):T=e[26];let C;return e[27]!==s||e[28]!==a||e[29]!==r||e[30]!==_||e[31]!==T?(C=l.jsx(Jn,{onCatch:g,children:l.jsx(fi,{children:l.jsx(Qn,{children:l.jsx(yr,{onStructureParams:s,structureParams:_,searchParams:r,refs:a,children:T})})})}),e[27]=s,e[28]=a,e[29]=r,e[30]=_,e[31]=T,e[32]=C):C=e[32],C}function yi(){return{}}function vi(t){return St(t._id)}const bi=ue(gt)`
  white-space: pre-wrap;
`;function xi(t){const e=z.c(35),{documentId:n,documentType:s,onFocusPath:r,onStructureParams:a,searchParams:i,structureParams:o}=t,{template:c,templateParams:u}=o,{t:p}=Pe(Se),{devMode:d}=Kt();let v,m;e[0]!==u?(m=Is(u),e[0]=u,e[1]=m):m=e[1];let y;e[2]!==n||e[3]!==s||e[4]!==m||e[5]!==c?(y={id:n,type:s,template:c,templateParameters:m},e[2]=n,e[3]=s,e[4]=m,e[5]=c,e[6]=y):y=e[6];let h;e[7]!==n||e[8]!==y?(h={id:n,options:y,title:"",type:"document"},e[7]=n,e[8]=y,e[9]=h):h=e[9],v=h;const b=v,[g,w]=f.useState(null);let P;e[10]===Symbol.for("react.memo_cache_sentinel")?(P=()=>w(null),e[10]=P):P=e[10];const _=P;let S;e[11]===Symbol.for("react.memo_cache_sentinel")?(S=()=>{w(null)},e[11]=S):S=e[11];let R;if(e[12]!==n||e[13]!==s||e[14]!==o?(R=[n,s,o],e[12]=n,e[13]=s,e[14]=o,e[15]=R):R=e[15],f.useEffect(S,R),g){let I;e[16]!==p?(I=p("document-pane.error.text"),e[16]=p,e[17]=I):I=e[17];let A;e[18]!==d||e[19]!==g||e[20]!==p?(A=d&&l.jsx(le,{overflow:"auto",padding:3,radius:2,tone:"critical",children:l.jsxs(Re,{space:3,children:[l.jsx(mt,{muted:!0,size:0,children:p("presentation-error.label")}),l.jsx(bi,{size:1,children:g.error.message})]})}),e[18]=d,e[19]=g,e[20]=p,e[21]=A):A=e[21];let E;return e[22]!==I||e[23]!==A?(E=l.jsx(pn,{flex:1,message:I,onRetry:_,children:A}),e[22]=I,e[23]=A,e[24]=E):E=e[24],E}let T;e[25]===Symbol.for("react.memo_cache_sentinel")?(T={height:"100%"},e[25]=T):T=e[25];let C;e[26]===Symbol.for("react.memo_cache_sentinel")?(C=l.jsx(Kn,{}),e[26]=C):C=e[26];let j;e[27]!==r||e[28]!==b?(j=l.jsx(f.Suspense,{fallback:C,children:l.jsx(Ms,{paneKey:"document",index:1,itemId:"document",pane:b,onFocusPath:r})}),e[27]=r,e[28]=b,e[29]=j):j=e[29];let x;return e[30]!==a||e[31]!==i||e[32]!==o||e[33]!==j?(x=l.jsx(Jn,{onCatch:w,children:l.jsx(Gn,{style:T,children:l.jsx(yr,{searchParams:i,onStructureParams:a,structureParams:o,children:j})})}),e[30]=a,e[31]=i,e[32]=o,e[33]=j,e[34]=x):x=e[34],x}function wi(t){const e=z.c(7),{documentId:n,documentType:s,onFocusPath:r,onStructureParams:a,searchParams:i,structureParams:o}=t;let c;return e[0]!==n||e[1]!==s||e[2]!==r||e[3]!==a||e[4]!==i||e[5]!==o?(c=l.jsx(Qn,{children:l.jsx(xi,{documentId:n,documentType:s,onFocusPath:r,onStructureParams:a,searchParams:i,structureParams:o})}),e[0]=n,e[1]=s,e[2]=r,e[3]=a,e[4]=i,e[5]=o,e[6]=c):c=e[6],c}function Pi(t,e){const n=z.c(6),s=vs();let r;n[0]===Symbol.for("react.memo_cache_sentinel")?(r={},n[0]=r):r=n[0];const[a,i]=f.useState(r);let o,c;return n[1]!==t||n[2]!==s||n[3]!==e?(o=()=>{if(!e)return;const u=xs(s,e,t,"").subscribe(p=>{i(p)});return()=>{u==null||u.unsubscribe()}},c=[s,e,t],n[1]=t,n[2]=s,n[3]=e,n[4]=o,n[5]=c):(o=n[4],c=n[5]),f.useEffect(o,c),a}function Si(t){var T,C,j,x,I,A,E,M;const e=z.c(39),{documentId:n,documentType:s,mainDocumentState:r,onFocusPath:a,onStructureParams:i,refs:o,searchParams:c,structureParams:u}=t,{t:p}=Pe(Se),d=ds();let v;e[0]!==((T=r==null?void 0:r.document)==null?void 0:T._id)||e[1]!==((C=r==null?void 0:r.document)==null?void 0:C._type)||e[2]!==c?(v=k=>{var O,D;return l.jsx(wt,{...k,state:{id:(O=r==null?void 0:r.document)==null?void 0:O._id,type:(D=r==null?void 0:r.document)==null?void 0:D._type,_searchParams:Object.entries(c)}})},e[0]=(j=r==null?void 0:r.document)==null?void 0:j._id,e[1]=(x=r==null?void 0:r.document)==null?void 0:x._type,e[2]=c,e[3]=v):v=e[3];const m=v;let y,h;e[4]!==((I=r==null?void 0:r.document)==null?void 0:I._type)||e[5]!==d?(h=d.get(((A=r==null?void 0:r.document)==null?void 0:A._type)||"shoe"),e[4]=(E=r==null?void 0:r.document)==null?void 0:E._type,e[5]=d,e[6]=h):h=e[6],y=h;const b=y,g=Pi(((M=r==null?void 0:r.document)==null?void 0:M._id)||"",b);let w;e:{if(!(r!=null&&r.document)){w=null;break e}const k=r.document;let O;e[7]!==g.draft||e[8]!==g.published||e[9]!==k?(O=ps({value:k,published:g.published,draft:g.draft}),e[7]=g.draft,e[8]=g.published,e[9]=k,e[10]=O):O=e[10];let D;e[11]!==p?(D=p("main-document.label"),e[11]=p,e[12]=D):D=e[12];let U;e[13]!==D?(U=l.jsx(le,{padding:1,radius:2,shadow:1,children:l.jsx(V,{muted:!0,size:0,weight:"medium",children:D})}),e[13]=D,e[14]=U):U=e[14];let q;e[15]!==b||e[16]!==O||e[17]!==U?(q=l.jsx(fs,{...O,schemaType:b,status:U}),e[15]=b,e[16]=O,e[17]=U,e[18]=q):q=e[18],w=q}const P=w;if(n&&s){let k;return e[19]!==n||e[20]!==s||e[21]!==a||e[22]!==i||e[23]!==c||e[24]!==u?(k=l.jsx(wi,{documentId:n,documentType:s,onFocusPath:a,onStructureParams:i,searchParams:c,structureParams:u}),e[19]=n,e[20]=s,e[21]=a,e[22]=i,e[23]=c,e[24]=u,e[25]=k):k=e[25],k}let _;e[26]!==m||e[27]!==r||e[28]!==P||e[29]!==p?(_=r&&l.jsx(le,{padding:3,tone:r.document?"inherit":"caution",children:r.document?l.jsx(hs,{__unstable_focusRing:!0,as:m,"data-as":"a",radius:2,sizing:"border",tone:"inherit",children:P}):l.jsx(le,{padding:2,radius:2,tone:"inherit",children:l.jsxs(J,{gap:3,children:[l.jsx(ne,{flex:"none",children:l.jsx(V,{size:1,children:l.jsx(ms,{})})}),l.jsx(ne,{flex:1,children:l.jsx(V,{size:1,children:l.jsx(gs,{t:p,i18nKey:"main-document.missing.text",components:{Code:"code"},values:{path:r.path}})})})]})})}),e[26]=m,e[27]=r,e[28]=P,e[29]=p,e[30]=_):_=e[30];let S;e[31]!==r||e[32]!==i||e[33]!==o||e[34]!==c?(S=l.jsx(gi,{mainDocumentState:r,onStructureParams:i,searchParams:c,refs:o}),e[31]=r,e[32]=i,e[33]=o,e[34]=c,e[35]=S):S=e[35];let R;return e[36]!==_||e[37]!==S?(R=l.jsxs(J,{direction:"column",flex:1,height:"fill",children:[_,S]}),e[36]=_,e[37]=S,e[38]=R):R=e[38],R}function _i(t){const e=z.c(2);let n;e[0]!==t?(n=()=>t||Je(),e[0]=t,e[1]=n):n=e[1];const[s]=f.useState(n);return s}const ji=ue.div`
  position: relative;
`,Ei=ue.div`
  position: absolute;
  top: 0;
  bottom: 0;
  left: -5px;
  width: 9px;
  z-index: 10;
  cursor: ${({$disabled:t})=>t?"auto":"ew-resize"};

  /* Border */
  & > span:nth-child(1) {
    display: block;
    border-left: 1px solid var(--card-border-color);
    position: absolute;
    top: 0;
    left: 4px;
    bottom: 0;
    transition: opacity 200ms;
  }

  ${({$disabled:t})=>!t&&`
    /* Hover effect */
    & > span:nth-child(2) {
      display: block;
      position: absolute;
      top: 0;
      left: 0;
      width: 9px;
      bottom: 0;
      background-color: var(--card-border-color);
      opacity: 0;
      transition: opacity 150ms;
    }

    @media (hover: hover) {
      &:hover > span:nth-child(2) {
        opacity: 0.2;
      }
    }
  `}
`,vr=function(t){const e=z.c(27),{id:n,order:s,disabled:r}=t,a=r===void 0?!1:r,i=f.useRef(null),o=f.useContext(Qt);if(o===null)throw Error("Panel components must be rendered within a PanelGroup container");const c=_i(n),{activeResizer:u,drag:p,startDragging:d,stopDragging:v,registerElement:m,unregisterElement:y}=o,h=u===c;if(o===null)throw Error("Panel components must be rendered within a PanelGroup container");let b;e[0]!==c||e[1]!==d?(b=M=>{d(c,M.nativeEvent)},e[0]=c,e[1]=d,e[2]=b):b=e[2];const g=b;let w;e[3]!==p||e[4]!==c?(w=M=>{p(c,M)},e[3]=p,e[4]=c,e[5]=w):w=e[5];const P=w;let _;e[6]!==v?(_=()=>{i.current.blur(),v()},e[6]=v,e[7]=_):_=e[7];const S=_;let R,T;e[8]!==a||e[9]!==h||e[10]!==P||e[11]!==S?(R=()=>{if(!h||a)return;const M=function(){const k=document.body.style,O=document.documentElement.style,{cursor:D}=O,{userSelect:U}=k;return O.cursor="ew-resize",k.userSelect="none",()=>{D?O.cursor=D:O.removeProperty("cursor"),U?k.userSelect=U:k.removeProperty("user-select")}}();return window.addEventListener("mousemove",P),window.addEventListener("mouseup",S),window.addEventListener("contextmenu",S),()=>{M(),window.removeEventListener("mousemove",P),window.removeEventListener("mouseup",S),window.removeEventListener("contextmenu",S)}},T=[a,h,P,S],e[8]=a,e[9]=h,e[10]=P,e[11]=S,e[12]=R,e[13]=T):(R=e[12],T=e[13]),f.useEffect(R,T);let C,j;e[14]!==c||e[15]!==s||e[16]!==m||e[17]!==y?(C=()=>(m(c,{id:c,order:s,type:"resizer",el:i}),()=>{y(c)}),j=[c,s,m,y],e[14]=c,e[15]=s,e[16]=m,e[17]=y,e[18]=C,e[19]=j):(C=e[18],j=e[19]),f.useLayoutEffect(C,j);let x,I;e[20]===Symbol.for("react.memo_cache_sentinel")?(I=l.jsx("span",{}),x=l.jsx("span",{}),e[20]=x,e[21]=I):(x=e[20],I=e[21]);let A;e[22]!==a?(A=l.jsxs(Ei,{$disabled:a,children:[I,x]}),e[22]=a,e[23]=A):A=e[23];let E;return e[24]!==g||e[25]!==A?(E=l.jsx(ji,{onMouseDown:g,ref:i,children:A}),e[24]=g,e[25]=A,e[26]=E):E=e[26],E},Ri=t=>{const e=z.c(8),{documentId:n,setDisplayedDocument:s,getCommentIntent:r}=t;let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=l.jsx(vr,{order:4}),e[0]=a):a=e[0];let i;e[1]!==r||e[2]!==t.children?(i=l.jsx(ys,{getIntent:r,children:t.children}),e[1]=r,e[2]=t.children,e[3]=i):i=e[3];let o;return e[4]!==n||e[5]!==s||e[6]!==i?(o=l.jsxs(l.Fragment,{children:[a,l.jsx(dn,{id:"content",minWidth:325,order:5,children:l.jsx(Ls,{documentId:n,setDisplayedDocument:s,children:i})})]}),e[4]=n,e[5]=s,e[6]=i,e[7]=o):o=e[7],o},Ti=t=>{const e=z.c(14),{documentId:n,documentsOnPage:s,documentType:r,getCommentIntent:a,mainDocumentState:i,onFocusPath:o,onStructureParams:c,searchParams:u,setDisplayedDocument:p,structureParams:d}=t;let v;e[0]!==n||e[1]!==r||e[2]!==s||e[3]!==i||e[4]!==o||e[5]!==c||e[6]!==u||e[7]!==d?(v=l.jsx(Si,{documentId:n,documentType:r,mainDocumentState:i,onFocusPath:o,onStructureParams:c,refs:s,searchParams:u,structureParams:d}),e[0]=n,e[1]=r,e[2]=s,e[3]=i,e[4]=o,e[5]=c,e[6]=u,e[7]=d,e[8]=v):v=e[8];let m;return e[9]!==n||e[10]!==a||e[11]!==p||e[12]!==v?(m=l.jsx(Ri,{documentId:n,getCommentIntent:a,setDisplayedDocument:p,children:v}),e[9]=n,e[10]=a,e[11]=p,e[12]=v,e[13]=m):m=e[13],m},Ci=function(t){const e=z.c(5),{children:n,navigate:s}=t;let r;e[0]!==s?(r=(o,c)=>{s((c===void 0?void 0:c)||{},o?{preview:o}:{})},e[0]=s,e[1]=r):r=e[1];const a=r;let i;return e[2]!==n||e[3]!==a?(i=l.jsx(ss.Provider,{value:a,children:n}),e[2]=n,e[3]=a,e[4]=i):i=e[4],i};function Ii(t,e){const n=z.c(9);let s;n[0]!==e||n[1]!==t?(s=()=>JSON.parse(localStorage.getItem(t)??JSON.stringify(e)),n[0]=e,n[1]=t,n[2]=s):s=n[2];const[r,a]=f.useState(s);let i,o;n[3]!==t||n[4]!==r?(i=()=>{localStorage.setItem(t,JSON.stringify(r))},o=[t,r],n[3]=t,n[4]=r,n[5]=i,n[6]=o):(i=n[5],o=n[6]),f.useEffect(i,o);let c;return n[7]!==r?(c=[r,a],n[7]=r,n[8]=c):c=n[8],c}function ki(t){const e=z.c(11),{unstable_navigator:n}=t,s=!!(n!=null&&n.component),[r,a]=Ii("presentation/navigator",s),i=s?r:!1;let o;e:{if(!s){o=void 0;break e}let m;e[0]!==a?(m=()=>a($i),e[0]=a,e[1]=m):m=e[1],o=m}const c=o;let u;e[2]!==i||e[3]!==n?(u=function(){return l.jsx(l.Fragment,{children:i&&l.jsx(Mi,{...n})})},e[2]=i,e[3]=n,e[4]=u):u=e[4];const p=u;let d;e[5]!==i||e[6]!==c?(d={navigatorEnabled:i,toggleNavigator:c},e[5]=i,e[6]=c,e[7]=d):d=e[7];let v;return e[8]!==p||e[9]!==d?(v=[d,p],e[8]=p,e[9]=d,e[10]=v):v=e[10],v}function $i(t){return!t}function Ai(t){const e=z.c(11),{minWidth:n,maxWidth:s,component:r}=t,a=n!=null&&s!=null&&n===s;let i;e[0]!==r?(i=l.jsx(r,{}),e[0]=r,e[1]=i):i=e[1];let o;e[2]!==s||e[3]!==n||e[4]!==i?(o=l.jsx(dn,{id:"navigator",minWidth:n,maxWidth:s,order:1,children:i}),e[2]=s,e[3]=n,e[4]=i,e[5]=o):o=e[5];let c;e[6]!==a?(c=l.jsx(vr,{order:2,disabled:a}),e[6]=a,e[7]=c):c=e[7];let u;return e[8]!==o||e[9]!==c?(u=l.jsxs(l.Fragment,{children:[o,c]}),e[8]=o,e[9]=c,e[10]=u):u=e[10],u}const Mi=f.memo(Ai),Oi=function(t){const e=z.c(3),{children:n,params:s}=t;let r;r=s;const a=r;let i;return e[0]!==n||e[1]!==a?(i=l.jsx(as.Provider,{value:a,children:n}),e[0]=n,e[1]=a,e[2]=i):i=e[2],i},Li=function(t){const e=z.c(10),{children:n,devMode:s,name:r,navigate:a,params:i,searchParams:o,structureParams:c}=t;let u,p;e[0]!==s||e[1]!==r||e[2]!==a||e[3]!==i||e[4]!==o||e[5]!==c?(p={devMode:s,name:r,navigate:a,params:i,searchParams:o,structureParams:c},e[0]=s,e[1]=r,e[2]=a,e[3]=i,e[4]=o,e[5]=c,e[6]=p):p=e[6],u=p;const d=u;let v;return e[7]!==n||e[8]!==d?(v=l.jsx(is.Provider,{value:d,children:n}),e[7]=n,e[8]=d,e[9]=v):v=e[9],v},zi=it.create(ue.iframe`
  box-shadow: 0 0 0 1px var(--card-border-color);
  border: 0;
  max-height: 100%;
  width: 100%;
  view-transition-class: presentation-tool-iframe;
`),Di=ue(ne)`
  position: absolute;
  inset: 0;
  background: transparent;
`,Wi=f.forwardRef(function(t,e){const n=z.c(16),{animate:s,initial:r,onLoad:a,preventClick:i,src:o,variants:c,style:u}=t,p=`presentation-tool-iframe-${f.useId().replace(/[^a-zA-Z0-9-_]/g,"_")}`;let d;n[0]!==u||n[1]!==p?(d={...u,viewTransitionName:p},n[0]=u,n[1]=p,n[2]=d):d=n[2];let v;n[3]!==s||n[4]!==r||n[5]!==a||n[6]!==e||n[7]!==o||n[8]!==d||n[9]!==c?(v=l.jsx(zi,{style:d,animate:s,initial:r,onLoad:a,ref:e,src:o,variants:c}),n[3]=s,n[4]=r,n[5]=a,n[6]=e,n[7]=o,n[8]=d,n[9]=c,n[10]=v):v=n[10];let m;n[11]!==i?(m=i&&l.jsx(Di,{}),n[11]=i,n[12]=m):m=n[12];let y;return n[13]!==v||n[14]!==m?(y=l.jsxs(l.Fragment,{children:[v,m]}),n[13]=v,n[14]=m,n[15]=y):y=n[15],y});function Ni(t){const e=z.c(16),{openPopup:n,previewLocationOrigin:s,previewLocationRoute:r}=t,{t:a}=Pe(Se);let i;e[0]!==n?(i=h=>{h.preventDefault(),n(h.currentTarget.href)},e[0]=n,e[1]=i):i=e[1];const o=i;let c;e[2]!==a?(c=a("share-url.menu-item.open.text"),e[2]=a,e[3]=c):c=e[3];let u;e[4]!==c?(u=l.jsx(V,{size:1,children:c}),e[4]=c,e[5]=u):u=e[5];let p;e[6]===Symbol.for("react.memo_cache_sentinel")?(p=["bottom-start"],e[6]=p):p=e[6];let d;e[7]!==a?(d=a("share-url.menu-item.open.text"),e[7]=a,e[8]=d):d=e[8];const v=`${s}${r}`;let m;e[9]!==o||e[10]!==d||e[11]!==v?(m=l.jsx(we,{as:"a","aria-label":d,icon:ks,mode:"bleed",href:v,rel:"opener",target:"_blank",tooltipProps:null,onClick:o}),e[9]=o,e[10]=d,e[11]=v,e[12]=m):m=e[12];let y;return e[13]!==u||e[14]!==m?(y=l.jsx(tt,{animate:!0,content:u,fallbackPlacements:p,placement:"bottom",portal:!0,children:m}),e[13]=u,e[14]=m,e[15]=y):y=e[15],y}const Ui=function(t){var U;const e=z.c(27),{fontSize:n,onChange:s,origin:r,padding:a,prefix:i,suffix:o,value:c}=t,u=n===void 0?1:n,p=a===void 0?3:a,{t:d}=Pe(Se),{basePath:v}=((U=Xn())==null?void 0:U.activeWorkspace)||{},m=v===void 0?"/":v,y=f.useRef(null),[h,b]=f.useState(void 0),[g,w]=f.useState(void 0);let P;e[0]===Symbol.for("react.memo_cache_sentinel")?(P=q=>{b(q.currentTarget.value)},e[0]=P):P=e[0];const _=P;let S;e[1]!==m||e[2]!==s||e[3]!==r||e[4]!==h||e[5]!==d?(S=q=>{var G;if(q.key==="Enter"){if(h===void 0)return;const K=h.startsWith("/")||h===""?`${r}${h}`:h;if(!K.startsWith(`${r}/`)&&K!==r){w(d("preview-location-input.error",{origin:r,context:"missing-origin"}));return}if(!r&&(K.startsWith(`${m}/`)||K===m)){w(d("preview-location-input.error",{basePath:m,context:"same-base-path"}));return}const Z=K===r?`${r}/`:K;w(void 0),b(void 0),s(Z.slice(r.length)),(G=y.current)==null||G.blur()}q.key==="Escape"&&(w(void 0),b(void 0))},e[1]=m,e[2]=s,e[3]=r,e[4]=h,e[5]=d,e[6]=S):S=e[6];const R=S;let T;e[7]===Symbol.for("react.memo_cache_sentinel")?(T=()=>{w(void 0),b(void 0)},e[7]=T):T=e[7];const C=T;let j;e[8]===Symbol.for("react.memo_cache_sentinel")?(j=()=>{w(void 0),b(void 0)},e[8]=j):j=e[8];let x;e[9]!==r||e[10]!==c?(x=[r,c],e[9]=r,e[10]=c,e[11]=x):x=e[11],f.useEffect(j,x);let I,A;e[12]===Symbol.for("react.memo_cache_sentinel")?(A={icon:$s},e[12]=A):A=e[12],I=A;const E=g?I:void 0;let M;e[13]!==r||e[14]!==c?(M=()=>{w(void 0),b(r+c)},e[13]=r,e[14]=c,e[15]=M):M=e[15];let k;e[16]===Symbol.for("react.memo_cache_sentinel")?(k={zIndex:1},e[16]=k):k=e[16];const O=h===void 0?`${r}${c}`:h;let D;return e[17]!==g||e[18]!==u||e[19]!==R||e[20]!==p||e[21]!==i||e[22]!==o||e[23]!==E||e[24]!==M||e[25]!==O?(D=l.jsx(l.Fragment,{children:l.jsx(As,{clearButton:E,customValidity:g,fontSize:u,onBlur:C,onClear:M,onChange:_,onKeyDownCapture:R,padding:p,prefix:i,style:k,radius:2,ref:y,space:p,suffix:o,value:O})}),e[17]=g,e[18]=u,e[19]=R,e[20]=p,e[21]=i,e[22]=o,e[23]=E,e[24]=M,e[25]=O,e[26]=D):D=e[26],D},qi=f.lazy(()=>Te(()=>import("./QRCodeSVG-D2ORQHR6.js"),__vite__mapDeps([0,1]))),Ft=24,Vi=16,Fi=224,Bi=ue(os)`
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  height: ${Ft}px;
  width: ${Ft}px;
`,Hi=it.create(ht),Ki=it.create(V),Gi=it.create(Bi),br=f.memo(function(t){const{canToggleSharePreviewAccess:e,canUseSharedPreviewAccess:n,initialUrl:s,previewLocationRoute:r,perspective:a}=t,{t:i}=Pe(Se),{push:o}=Ln(),c=ot({apiVersion:Pt}),u=Ht(),[p,d]=f.useState(!0),[v,m]=f.useState(!1),[y,h]=f.useState(!1),[b,g]=f.useState(null),w=v||y||p,P=f.useMemo(()=>b?Pa(s,b,r,a):null,[s,a,r,b]),[_,S]=f.useState(null);if(_)throw _;const R=f.useCallback(()=>{o({closable:!0,status:"warning",title:i("share-preview-menu.error_toggle-sharing",{context:"toggle-sharing"})})},[o,i]),T=f.useCallback(async()=>{try{h(!0),await _a(c,"@sanity/presentation",typeof window>"u"?"":location.href,u==null?void 0:u.id),g(null)}catch(x){S(x)}finally{h(!1)}},[c,u==null?void 0:u.id]),C=f.useCallback(async()=>{try{m(!0);const x=await Sa(c,"@sanity/presentation",typeof window>"u"?"":location.href,u==null?void 0:u.id);g(x.secret)}catch(x){S(x)}finally{m(!1)}},[c,u==null?void 0:u.id]),j=f.useCallback(()=>{try{if(!P)throw new Error("No URL to copy");navigator.clipboard.writeText(P.toString()),o({closable:!0,status:"success",title:i("share-url.clipboard.status",{context:"success"})})}catch(x){S(x)}},[o,i,P]);return f.useEffect(()=>{let x=new AbortController,I=[];async function A(M,k){const{result:O,syncTags:D}=await c.fetch(Ws,{},{filterResponse:!1,lastLiveEventId:M,tag:"presentation.fetch-shared-access-secret"});Array.isArray(D)&&(I=D),k.aborted||g(O)}const E=c.live.events().subscribe({next:M=>{M.type==="message"&&(x.abort(),x=new AbortController,M.tags.some(k=>I.includes(k))&&A(M.id,x.signal))},error:S});return A(null,x.signal).finally(()=>d(!1)),()=>{E.unsubscribe(),x.abort()}},[c]),l.jsx(zn,{button:l.jsx(we,{"aria-label":i("preview-frame.share-button.aria-label"),icon:Or,mode:"bleed",tooltipProps:null}),id:"share-menu",menu:l.jsx(Dn,{style:{maxWidth:248},padding:n?void 0:0,children:n?l.jsxs(l.Fragment,{children:[l.jsx("label",{style:{cursor:"pointer"},children:l.jsxs(Lr,{columns:2,rows:2,gapX:3,gapY:1,style:{justifyContent:"center",alignItems:"center",gridTemplateColumns:"min-content 1fr",gridTemplateRows:"min-content"},paddingTop:3,paddingX:3,children:[l.jsx(tt,{animate:!0,content:l.jsx(V,{size:1,children:i("share-preview-menu.toggle-button.tooltip",{context:P?"disable":"enable"})}),fallbackPlacements:["bottom-start"],placement:"bottom",portal:!0,children:l.jsx(Wn,{checked:v||P!==null&&!y,readOnly:v||y,indeterminate:p,onChange:e?P?T:C:R})}),l.jsx(V,{size:1,weight:"medium",children:i("share-preview-menu.toggle-button.label",{context:"first-line"})}),l.jsx("span",{}),l.jsx(V,{muted:!0,size:1,children:i("share-preview-menu.toggle-button.label",{context:"second-line"})})]})}),l.jsx(ne,{padding:3,paddingTop:2,children:l.jsxs(Re,{space:3,children:[l.jsx(le,{tone:w||!P?"transparent":void 0,style:{position:"relative",aspectRatio:"1 / 1",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx(Nn,{children:w?l.jsx(Hi,{muted:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}}):P?l.jsx(l.Fragment,{children:l.jsxs(f.Suspense,{fallback:l.jsx(ht,{}),children:[l.jsx(qi,{title:i("share-preview-menu.qr-code.title",{url:P.toString()}),value:P.toString(),size:Fi,color:"var(--card-fg-color)",logoSize:Ft+Vi}),l.jsx(Gi,{initial:{opacity:-.5},animate:{opacity:1.5},exit:{opacity:0}})]})}):l.jsx(Ki,{muted:!0,size:1,style:{maxWidth:"100px",textWrap:"pretty",textAlign:"center"},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:i("share-preview-menu.qr-code.placeholder")})})}),l.jsx(V,{muted:!0,size:1,children:i("share-preview-menu.qr-code.instructions")})]})}),l.jsx(zr,{}),l.jsx(qt,{disabled:!P||y,icon:Dr,onClick:j,text:i("share-preview-menu.copy-url.text")})]}):l.jsx(le,{padding:2,tone:"caution",radius:3,children:l.jsx(V,{style:{textWrap:"pretty"},children:i("share-preview-menu.error",{context:"missing-grants"})})})}),popover:{constrainSize:!0,placement:"bottom",portal:!0}})});br.displayName="Memo(SharePreviewMenu)";const Ot={previewDrafts:"preview-frame.perspective.previewDrafts.title",published:"preview-frame.perspective.published.title"},Rn={previewDrafts:"caution",published:"positive"},Xi=t=>{const e=z.c(131),{canSharePreviewAccess:n,canToggleSharePreviewAccess:s,canUseSharedPreviewAccess:r,dispatch:a,iframe:i,iframeRef:o,initialUrl:c,loadersConnection:u,navigatorEnabled:p,onPathChange:d,onRefresh:v,openPopup:m,overlaysConnection:y,perspective:h,previewUrl:b,setPerspective:g,setViewport:w,targetOrigin:P,toggleNavigator:_,toggleOverlay:S,viewport:R,visualEditing:T}=t,{overlaysEnabled:C}=T,{t:j}=Pe(Se);let x;e[0]!==w||e[1]!==R?(x=()=>w(R==="desktop"?"mobile":"desktop"),e[0]=w,e[1]=R,e[2]=x):x=e[2];const I=x;let A;A=P===location.origin?"":P;const E=A;let M;e[3]!==a||e[4]!==o.current||e[5]!==v||e[6]!==b||e[7]!==P?(M=()=>{v(()=>{o.current&&(a({type:Un}),Object.assign(o.current,{src:`${P}${b||"/"}`}))})},e[3]=a,e[4]=o.current,e[5]=v,e[6]=b,e[7]=P,e[8]=M):M=e[8];const k=M;let O;const D=new URL(b||"/",P),{pathname:U,search:q}=wa(D);O=`${U}${q}`;const G=O;let K;e[9]===Symbol.for("react.memo_cache_sentinel")?(K={width:"100%"},e[9]=K):K=e[9];let Z;e[10]!==p||e[11]!==j||e[12]!==_?(Z=_&&l.jsx(we,{"aria-label":j("preview-frame.navigator.toggle-button.aria-label"),icon:bs,mode:"bleed",onClick:_,selected:p,tooltipProps:{content:l.jsx(V,{size:1,children:j("preview-frame.navigator.toggle-button.tooltip")}),fallbackPlacements:["bottom-start"],placement:"bottom"}}),e[10]=p,e[11]=j,e[12]=_,e[13]=Z):Z=e[13];let re;e[14]===Symbol.for("react.memo_cache_sentinel")?(re={whiteSpace:"nowrap"},e[14]=re):re=e[14];const de=C?"disable":"enable";let L;e[15]!==j||e[16]!==de?(L=j("preview-frame.overlay.toggle-button.tooltip",{context:de}),e[15]=j,e[16]=de,e[17]=L):L=e[17];let se;e[18]!==L?(se=l.jsx(ne,{padding:1,children:l.jsx(V,{size:1,children:L})}),e[18]=L,e[19]=se):se=e[19];let ae;e[20]===Symbol.for("react.memo_cache_sentinel")?(ae=l.jsx(ne,{paddingY:1,children:l.jsx(ws,{keys:["Alt"],style:{marginTop:-4,marginBottom:-4}})}),e[20]=ae):ae=e[20];let oe;e[21]!==se?(oe=l.jsxs(J,{align:"center",style:re,children:[se,ae]}),e[21]=se,e[22]=oe):oe=e[22];let B;e[23]===Symbol.for("react.memo_cache_sentinel")?(B=["bottom-start"],e[23]=B):B=e[23];let H;e[24]===Symbol.for("react.memo_cache_sentinel")?(H={lineHeight:0,borderRadius:999,userSelect:"none"},e[24]=H):H=e[24];const F=C?"transparent":void 0;let X;e[25]===Symbol.for("react.memo_cache_sentinel")?(X={margin:-4},e[25]=X):X=e[25];const ce=i.status==="loading"||y!=="connected";let ee;e[26]!==C||e[27]!==ce||e[28]!==S?(ee=l.jsx("div",{style:X,children:l.jsx(Wn,{checked:C,onChange:S,disabled:ce})}),e[26]=C,e[27]=ce,e[28]=S,e[29]=ee):ee=e[29];const Q=!C;let Y;e[30]!==j?(Y=j("preview-frame.overlay.toggle-button.text"),e[30]=j,e[31]=Y):Y=e[31];let ie;e[32]!==Q||e[33]!==Y?(ie=l.jsx(ne,{children:l.jsx(V,{muted:Q,size:1,weight:"medium",children:Y})}),e[32]=Q,e[33]=Y,e[34]=ie):ie=e[34];let pe;e[35]!==ee||e[36]!==ie?(pe=l.jsxs(J,{align:"center",gap:3,children:[ee,ie]}),e[35]=ee,e[36]=ie,e[37]=pe):pe=e[37];let ve;e[38]!==F||e[39]!==pe?(ve=l.jsx(le,{as:"label",flex:"none",padding:3,marginX:1,style:H,tone:F,children:pe}),e[38]=F,e[39]=pe,e[40]=ve):ve=e[40];let fe;e[41]!==oe||e[42]!==ve?(fe=l.jsx(tt,{animate:!0,content:oe,fallbackPlacements:B,placement:"bottom",portal:!0,children:ve}),e[41]=oe,e[42]=ve,e[43]=fe):fe=e[43];let be;e[44]!==i.status||e[45]!==j?(be=i.status==="loaded"?j("preview-frame.refresh-button.tooltip"):j("preview-frame.status",{context:i.status}),e[44]=i.status,e[45]=j,e[46]=be):be=e[46];let he;e[47]!==be?(he=l.jsx(V,{size:1,children:be}),e[47]=be,e[48]=he):he=e[48];let xe;e[49]===Symbol.for("react.memo_cache_sentinel")?(xe=["bottom-end"],e[49]=xe):xe=e[49];let me;e[50]!==j?(me=j("preview-frame.refresh-button.aria-label"),e[50]=j,e[51]=me):me=e[51];const Qe=i.status==="reloading"||i.status==="refreshing";let _e;e[52]!==k||e[53]!==me||e[54]!==Qe?(_e=l.jsx(we,{"aria-label":me,icon:Ps,mode:"bleed",loading:Qe,onClick:k,tooltipProps:null}),e[52]=k,e[53]=me,e[54]=Qe,e[55]=_e):_e=e[55];let Ce;e[56]!==he||e[57]!==_e?(Ce=l.jsx(ne,{padding:1,children:l.jsx(tt,{animate:!0,content:he,fallbackPlacements:xe,placement:"bottom",portal:!0,children:_e})}),e[56]=he,e[57]=_e,e[58]=Ce):Ce=e[58];let Ie;e[59]!==m||e[60]!==E||e[61]!==G?(Ie=l.jsx(ne,{padding:1,children:l.jsx(Ni,{openPopup:m,previewLocationOrigin:E,previewLocationRoute:G})}),e[59]=m,e[60]=E,e[61]=G,e[62]=Ie):Ie=e[62];let ke;e[63]!==d||e[64]!==E||e[65]!==G||e[66]!==Ce||e[67]!==Ie?(ke=l.jsx(ne,{flex:1,children:l.jsx(Ui,{prefix:Ce,onChange:d,origin:E,suffix:Ie,value:G})}),e[63]=d,e[64]=E,e[65]=G,e[66]=Ce,e[67]=Ie,e[68]=ke):ke=e[68];const ze=Ot[u==="connected"?h:"previewDrafts"];let je;e[69]!==j||e[70]!==ze?(je=j(ze),e[69]=j,e[70]=ze,e[71]=je):je=e[71];const De=u==="reconnecting"&&i.status!=="loaded",We=u!=="connected";let Ee;e[72]!==je||e[73]!==De||e[74]!==We?(Ee=l.jsx(we,{iconRight:Ss,mode:"bleed",text:je,loading:De,disabled:We}),e[72]=je,e[73]=De,e[74]=We,e[75]=Ee):Ee=e[75];let $;e[76]===Symbol.for("react.memo_cache_sentinel")?($={maxWidth:240},e[76]=$):$=e[76];let N;e[77]!==g?(N=()=>g("previewDrafts"),e[77]=g,e[78]=N):N=e[78];const W=h==="previewDrafts";let $e;e[79]!==h||e[80]!==j?($e=()=>l.jsxs(J,{align:"flex-start",gap:3,children:[l.jsx(ne,{flex:"none",children:l.jsx(V,{size:1,children:l.jsx(_s,{})})}),l.jsxs(Re,{flex:1,space:2,children:[l.jsx(V,{size:1,weight:"medium",children:j(Ot.previewDrafts)}),l.jsx(V,{muted:!0,size:1,children:j("preview-frame.perspective.previewDrafts.text")})]}),l.jsx(ne,{flex:"none",children:l.jsx(V,{muted:!0,size:1,style:{opacity:h==="previewDrafts"?1:0},children:l.jsx(gn,{})})})]}),e[79]=h,e[80]=j,e[81]=$e):$e=e[81];let ge;e[82]!==N||e[83]!==W||e[84]!==$e?(ge=l.jsx(qt,{onClick:N,pressed:W,tone:Rn.previewDrafts,renderMenuItem:$e}),e[82]=N,e[83]=W,e[84]=$e,e[85]=ge):ge=e[85];let Ae;e[86]!==g?(Ae=()=>g("published"),e[86]=g,e[87]=Ae):Ae=e[87];const Ye=h==="published";let ye;e[88]!==h||e[89]!==j?(ye=()=>l.jsxs(J,{align:"flex-start",gap:3,children:[l.jsx(ne,{flex:"none",children:l.jsx(V,{size:1,children:l.jsx(js,{})})}),l.jsxs(Re,{flex:1,space:2,children:[l.jsx(V,{size:1,weight:"medium",children:j(Ot.published)}),l.jsx(V,{muted:!0,size:1,children:j("preview-frame.perspective.published.text")})]}),l.jsx(ne,{flex:"none",children:l.jsx(V,{muted:!0,size:1,style:{opacity:h==="published"?1:0},children:l.jsx(gn,{})})})]}),e[88]=h,e[89]=j,e[90]=ye):ye=e[90];let Ne;e[91]!==Ae||e[92]!==Ye||e[93]!==ye?(Ne=l.jsx(qt,{onClick:Ae,pressed:Ye,tone:Rn.published,renderMenuItem:ye}),e[91]=Ae,e[92]=Ye,e[93]=ye,e[94]=Ne):Ne=e[94];let Ue;e[95]!==ge||e[96]!==Ne?(Ue=l.jsxs(Dn,{style:$,children:[ge,Ne]}),e[95]=ge,e[96]=Ne,e[97]=Ue):Ue=e[97];let ct;e[98]===Symbol.for("react.memo_cache_sentinel")?(ct={constrainSize:!0,placement:"bottom",portal:!0},e[98]=ct):ct=e[98];let qe;e[99]!==Ee||e[100]!==Ue?(qe=l.jsx(J,{align:"center",flex:"none",gap:1,children:l.jsx(zn,{button:Ee,id:"perspective-menu",menu:Ue,popover:ct})}),e[99]=Ee,e[100]=Ue,e[101]=qe):qe=e[101];const Et=R==="desktop"?"narrow":"full";let Ve;e[102]!==j||e[103]!==Et?(Ve=j("preview-frame.viewport-button.tooltip",{context:Et}),e[102]=j,e[103]=Et,e[104]=Ve):Ve=e[104];let Fe;e[105]!==Ve?(Fe=l.jsx(V,{size:1,children:Ve}),e[105]=Ve,e[106]=Fe):Fe=e[106];let lt;e[107]===Symbol.for("react.memo_cache_sentinel")?(lt=["bottom-start"],e[107]=lt):lt=e[107];let Be;e[108]!==j?(Be=j("preview-frame.viewport-button.aria-label"),e[108]=j,e[109]=Be):Be=e[109];const Rt=R==="desktop"?Es:Rs;let He;e[110]!==Be||e[111]!==Rt||e[112]!==I?(He=l.jsx(we,{"aria-label":Be,icon:Rt,mode:"bleed",onClick:I,tooltipProps:null}),e[110]=Be,e[111]=Rt,e[112]=I,e[113]=He):He=e[113];let Ke;e[114]!==Fe||e[115]!==He?(Ke=l.jsx(J,{align:"center",flex:"none",gap:1,children:l.jsx(tt,{animate:!0,content:Fe,fallbackPlacements:lt,placement:"bottom",portal:!0,children:He})}),e[114]=Fe,e[115]=He,e[116]=Ke):Ke=e[116];let Ge;e[117]!==n||e[118]!==s||e[119]!==r||e[120]!==c||e[121]!==h||e[122]!==G?(Ge=n&&l.jsx(J,{align:"center",flex:"none",gap:1,children:l.jsx(br,{canToggleSharePreviewAccess:s,canUseSharedPreviewAccess:r,previewLocationRoute:G,initialUrl:c,perspective:h})}),e[117]=n,e[118]=s,e[119]=r,e[120]=c,e[121]=h,e[122]=G,e[123]=Ge):Ge=e[123];let ut;return e[124]!==fe||e[125]!==ke||e[126]!==qe||e[127]!==Ke||e[128]!==Ge||e[129]!==Z?(ut=l.jsxs(J,{align:"center",gap:1,paddingX:1,style:K,children:[Z,fe,ke,qe,Ke,Ge]}),e[124]=fe,e[125]=ke,e[126]=qe,e[127]=Ke,e[128]=Ge,e[129]=Z,e[130]=ut):ut=e[130],ut};function Ji(t){var u;const e=z.c(7),n=Qi,s=(u=t.options)==null?void 0:u.component;let r;e[0]!==s||e[1]!==t?(r=s?l.jsx(s,{...t,renderDefault:n}):n(t),e[0]=s,e[1]=t,e[2]=r):r=e[2];const a=r;let i;e[3]===Symbol.for("react.memo_cache_sentinel")?(i={position:"relative"},e[3]=i):i=e[3];let o;e[4]===Symbol.for("react.memo_cache_sentinel")?(o={minHeight:0},e[4]=o):o=e[4];let c;return e[5]!==a?(c=l.jsx(le,{flex:"none",padding:2,borderBottom:!0,style:i,children:l.jsx(J,{align:"center",style:o,children:a})}),e[5]=a,e[6]=c):c=e[6],c}function Qi(t){return l.jsx(Xi,{...t})}function Yi(t){const e=z.c(2);let n;return e[0]!==t?(n=()=>l.jsx(Ji,{...t}),e[0]=t,e[1]=n):n=e[1],n}const Lt=it.create(J),xr=f.memo(f.forwardRef(function(t,e){const{dispatch:n,iframe:s,header:r,initialUrl:a,loadersConnection:i,overlaysConnection:o,perspective:c,viewport:u,vercelProtectionBypass:p}=t,[d,v]=f.useState(null),m=d===null?c:d,y=f.useMemo(()=>{const L=new URL(a);return L.searchParams.get(rt)||L.searchParams.set(rt,m),(p||L.searchParams.get(nt))&&L.searchParams.set(tn,"samesitenone"),p&&!L.searchParams.get(nt)&&L.searchParams.set(nt,p),L},[a,m,p]);f.useEffect(()=>{i==="connected"&&v(L=>L===null?c:L)},[i,c]);const{t:h}=Pe(Se),{devMode:b}=Kt(),g=Wr(),w=f.useRef(null),P=Yi({...t,iframeRef:w,options:r});f.useImperativeHandle(e,()=>w.current);const _=s.status==="loading"||s.status==="reloading",[S,R]=f.useState(!1),T=s.status==="refreshing",[C,j]=f.useState(!1),x=_||T||o==="connecting",I=f.useCallback(()=>{w.current&&(w.current.src=y.toString(),n({type:Un}))},[n,y]),A=f.useCallback(()=>{M(!0)},[]),[E,M]=f.useState(!1),[k,O]=f.useState(!1);f.useEffect(()=>{if(!(_||T)&&(o==="connecting"||o==="reconnecting")){const L=setTimeout(()=>{O(!0)},5e3);return()=>clearTimeout(L)}},[o,_,T]),f.useEffect(()=>{if(!(_||T||!k)){if(o==="connected"&&(j(!1),O(!1),R(!1),M(!1)),o==="connecting"){const L=setTimeout(()=>{R(!0),console.error("Unable to connect to visual editing. Make sure you've setup '@sanity/visual-editing' correctly")},hn);return()=>clearTimeout(L)}if(o==="reconnecting"){const L=setTimeout(()=>{R(!0),j(!0)},hn);return()=>clearTimeout(L)}}},[_,o,T,k]);const D=f.useCallback(()=>{n({type:qn})},[n]);f.useEffect(()=>{if(!w.current)return;const L=w.current;function se(){L===document.activeElement&&L.dispatchEvent(new MouseEvent("mousedown",{bubbles:!0,cancelable:!0}))}return window.addEventListener("blur",se),()=>{window.removeEventListener("blur",se)}},[]);const U=f.useMemo(()=>(_||o==="connecting"&&s.status!=="refreshing")&&!E,[E,s.status,_,o]),q=f.useSyncExternalStore(f.useCallback(()=>()=>{},[]),()=>CSS.supports("(view-transition-name: test)")),G=f.useMemo(()=>[U?"background":"active",_?"reloading":"idle",q?"":u,k&&!E?"timedOut":""],[q,E,_,U,k,u]),[K,Z]=f.useState(u),[re,de]=f.useState(zt[u]);return f.useEffect(()=>{if(q&&u!==K){const L=()=>{Z(u),de(zt[u])};!g&&"startViewTransition"in document&&typeof document.startViewTransition=="function"?document.startViewTransition(()=>Nr.flushSync(()=>L())):L()}},[q,g,K,u]),l.jsx(Ds,{transition:g?{duration:0}:void 0,children:l.jsxs(Ur,{children:[l.jsx(P,{}),l.jsx(le,{flex:1,tone:"transparent",children:l.jsxs(J,{align:"center",height:"fill",justify:"center",padding:(q?K:u)==="desktop"?0:2,sizing:"border",style:{position:"relative",cursor:x?"wait":void 0},children:[l.jsx(Nn,{children:!C&&!_&&!T&&k&&!E?l.jsx(Lt,{initial:"initial",animate:"animate",exit:"exit",variants:Tn,justify:"center",align:"center",style:{inset:"0",position:"absolute",backdropFilter:S?"blur(16px) saturate(0.5) grayscale(0.5)":"blur(2px)",transition:"backdrop-filter 0.2s ease-in-out",WebkitBackdropFilter:S?"blur(16px) saturate(0.5) grayscale(0.5)":"blur(2px)",WebkitTransition:"-webkit-backdrop-filter 0.2s ease-in-out",zIndex:1},children:l.jsxs(J,{style:{...xt[u]},justify:"center",align:"center",direction:"column",gap:4,children:[S&&l.jsx(we,{disabled:!0,mode:"ghost",text:h("preview-frame.continue-button.text"),style:{opacity:0}}),l.jsx(le,{radius:2,tone:S?"caution":"inherit",padding:4,shadow:1,children:l.jsxs(J,{justify:"center",align:"center",direction:"column",gap:4,children:[l.jsx(ht,{muted:!0}),l.jsx(V,{muted:!0,size:1,children:S?h("preview-frame.status",{context:"timeout"}):h("preview-frame.status",{context:"connecting"})})]})}),S&&l.jsx(we,{tone:"critical",onClick:A,text:h("preview-frame.continue-button.text")})]})}):(_||o==="connecting"&&s.status!=="refreshing")&&!E?l.jsx(Lt,{initial:"initial",animate:"animate",exit:"exit",variants:Tn,justify:"center",align:"center",style:{inset:"0",position:"absolute"},children:l.jsxs(J,{style:{...xt[u]},justify:"center",align:"center",direction:"column",gap:4,children:[l.jsx(ht,{muted:!0}),l.jsx(V,{muted:!0,size:1,children:h("preview-frame.status",{context:"loading"})})]})}):C&&!E?l.jsx(Lt,{initial:"initial",animate:"animate",exit:"exit",variants:Zi,justify:"center",align:"center",style:{background:"var(--card-bg-color)",inset:"0",position:"absolute"},children:l.jsx(pn,{flex:1,message:h("preview-frame.connection.error.text"),onRetry:I,onContinueAnyway:A,children:b&&l.jsxs(l.Fragment,{children:[o!=="connected"&&l.jsx(le,{padding:3,radius:2,tone:"critical",children:l.jsxs(Re,{space:3,children:[l.jsx(mt,{muted:!0,size:0,children:h("preview-frame.overlay.connection-status.label")}),l.jsx(gt,{size:1,children:h("channel.status",{context:o})})]})}),i!=="connected"&&l.jsx(le,{padding:3,radius:2,tone:"critical",children:l.jsxs(Re,{space:3,children:[l.jsx(mt,{muted:!0,size:0,children:h("preview-frame.loader.connection-status.label")}),l.jsx(gt,{size:1,children:h("channel.status",{context:i})})]})})]})})}):null}),l.jsx(Wi,{animate:G,initial:["background"],onLoad:D,preventClick:U,ref:w,src:y.toString(),style:re,variants:zt})]})})]})})}));xr.displayName="Memo(ForwardRef(Preview))";const xt={desktop:{width:"100%",height:"100%"},mobile:{width:375,height:650}},Tn={initial:{opacity:1},animate:{opacity:[0,0,1]},exit:{opacity:[1,0,0]}},Zi={initial:{opacity:1},animate:{opacity:[0,0,1]},exit:{opacity:[1,0,0]}},zt={desktop:{...xt.desktop,boxShadow:"0 0 0 0px var(--card-border-color)"},mobile:{...xt.mobile,boxShadow:"0 0 0 1px var(--card-border-color)"},background:{opacity:0,scale:1},idle:{scale:1},reloading:{scale:[1,1,1,.98]},active:{opacity:[0,0,1],scale:1},timedOut:{opacity:[0,0,1]}};function eo(t,e,n,s){const r=z.c(5),a=f.useRef(n),i=Jt(e);let o,c;r[0]!==i||r[1]!==s||r[2]!==t?(o=()=>{const u=a.current;if(a.current=t,t!==u)return i(t,u)},c=[i,s,t],r[0]=i,r[1]=s,r[2]=t,r[3]=o,r[4]=c):(o=r[3],c=r[4]),f.useEffect(o,c)}const to=function(t){const e=z.c(4),{documentId:n,documentType:s,navigate:r,perspective:a,documentRevision:i}=t,o=cs(n,s);let c;return e[0]!==i||e[1]!==o||e[2]!==r?(c=u=>{let p;if(u==="published"&&o.published){const{_updatedAt:d,_rev:v}=o.published;p=`${d}/${v}`}i!==p&&r({},{rev:p},!0)},e[0]=i,e[1]=o,e[2]=r,e[3]=c):c=e[3],eo(a,c),null};function no(){let t=!1;return(...e)=>{t||(console.warn(...e),t=!0)}}const ro=no();function so(t,e){if(t!=="published"&&t!=="previewDrafts")throw new Error(`Invalid perspective: ${t}`);const[n,s]=f.useState({}),[r,a]=f.useState({}),i=f.useRef(""),o=f.useCallback((c,u,p=[])=>{const d=p.filter(v=>"_projectId"in v&&v._projectId?(ro("Cross dataset references are not supported yet, ignoring source document",v),!1):v);(u==="published"?s:a)(v=>{const m={};for(const h of d)m[h._id]=h;if(i.current!==e.current.url)return i.current=e.current.url,{[c]:m};const y=v[c];return Os(y,m)?v:{...v,[c]:m}})},[e]);return[f.useMemo(()=>{const c=Object.values(t==="published"?n:r).reduce((u,p)=>(Object.values(p).forEach(d=>{u[d._id]=d}),u),{});return Object.values(c)},[t,r,n]),o]}function wr(t,e){return t instanceof Function?t(e):t}function ao(t,e){var n;if(t.resolve){const s=(n=t.resolve(e))==null?void 0:n.filter;return s?`// groq
*[${s}][0]{_id, _type}`:void 0}return"type"in t?`// groq
*[_type == "${t.type}"][0]{_id, _type}`:`// groq
*[${wr(t.filter,e)}][0]{_id, _type}`}function io(t,e){var n;return t.resolve?((n=t.resolve(e))==null?void 0:n.params)??e.params:"type"in t?{}:wr(t.params,e)??e.params}function oo(t,e){const n=Array.isArray(t)?t:[t];for(t of n){let s,r=t;if(typeof t=="string")try{const a=new URL(t);s=a.origin,r=a.pathname}catch{}if(!(s&&e.origin!==s))try{const a=Ra(r,{decode:decodeURIComponent})(e.pathname);if(a){const{params:i,path:o}=a;return{origin:s,params:i,path:o}}}catch{throw new Error(`"${t}" is not a valid route pattern`)}}}function co(t){var m,y;const{navigate:e,navigationHistory:n,path:s,previewUrl:r,resolvers:a=[]}=t,{state:i}=Xt(),o=ot({apiVersion:Pt}),c=s||((y=(m=i._searchParams)==null?void 0:m.find(([h])=>h==="preview"))==null?void 0:y[1])||"",[u,p]=f.useState(void 0),d=f.useRef(void 0),v=Jt((h,b)=>{var g,w;(!h||d.current!==h._id)&&(p({document:h,path:b.pathname}),d.current=h==null?void 0:h._id,((g=n.at(-1))==null?void 0:g.id)===((w=n.at(-2))==null?void 0:w.id)&&(e==null||e({id:h==null?void 0:h._id,type:h==null?void 0:h._type})))});return f.useEffect(()=>{const h=typeof r=="string"?r:typeof r=="object"&&(r==null?void 0:r.origin)||location.origin,b=new URL(c,h);if(a.length){let g;for(const w of a){const P=oo(w.route,b);if(P){g={context:P,resolver:w};break}}if(g){const w=ao(g.resolver,g.context),P=io(g.resolver,g.context);if(w){const _=new AbortController,S={perspective:"previewDrafts",signal:_.signal};return o.fetch(w,P,S).then(R=>v(R,b)).catch(R=>{R instanceof Error&&R.name==="AbortError"||(p({document:void 0,path:b.pathname}),d.current=void 0)}),()=>{_.abort()}}}}p(void 0),d.current=void 0},[o,v,r,c,a]),u}const lo=Vn(Gt(),Bn(1));Fn(lo);const uo=/^([\w-]+):(0|[1-9][0-9]*)$/,po=/^([\w-]+):([0-9]+),([0-9]+)$/,fo=/^([\w-]+):([\w-]+)$/;function ho(t){const e=[];for(const n of t.split(".")){const s=uo.exec(n);if(s){e.push(s[1],Number(s[2]));continue}const r=po.exec(n);if(r){e.push(r[1],[Number(r[2]),Number(r[3])]);continue}const a=fo.exec(n);if(a){e.push(a[1],{_key:a[2]});continue}e.push(n)}return e}const Cn=Vn(Gt(),Bn(1));qr({origin:Cn,href:Cn,data:Fn(Fr(Gt(),ls()))});function mo(t){var n;if(t===void 0)return;const e=(n=decodeURIComponent(t))==null?void 0:n.split(".");return e[0]==="drafts"&&e.shift(),e.join(".")}function go(t){if(t!==void 0)return nr.toString(ho(decodeURIComponent(t)))}function yo(t){return{id:mo(t.id),path:go(t.path),type:t.type}}function ft(t){return Object.fromEntries(Object.entries(t).filter(([,e])=>e!==void 0&&e!==""&&e!==null))}function vo({initialPreviewUrl:t,routerNavigate:e,routerState:n,routerSearchParams:s,frameStateRef:r}){const a=f.useMemo(()=>{const{id:d,path:v,type:m}=yo(n);return{id:d,type:m,path:v,preview:s.preview||`${t.pathname}${t.search}`,perspective:s.perspective,viewport:s.viewport,inspect:s.inspect,rev:s.rev,since:s.since,template:s.template,templateParams:s.templateParams,view:s.view,pathKey:s.pathKey,instruction:s.instruction,comment:s.comment,changesInspectorTab:s.changesInspectorTab}},[n,s,t]),i=f.useMemo(()=>ft({inspect:a.inspect,path:a.path,rev:a.rev,since:a.since,template:a.template,templateParams:a.templateParams,view:a.view,pathKey:a.pathKey,instruction:a.instruction,comment:a.comment,changesInspectorTab:a.changesInspectorTab}),[a.changesInspectorTab,a.comment,a.inspect,a.instruction,a.path,a.pathKey,a.rev,a.since,a.template,a.templateParams,a.view]),o=f.useMemo(()=>ft({perspective:a.perspective,preview:a.preview,viewport:a.viewport}),[a.perspective,a.preview,a.viewport]),c=f.useRef(n);f.useEffect(()=>{c.current=n},[n]);const[u,p]=f.useState([n]);return{navigate:f.useCallback((d,v={},m)=>{d.id&&(d.id=St(d.id));const{_searchParams:y,...h}=c.current,b=(y||[]).reduce((_,[S,R])=>(_[S]=R,_),{}),g=ft({...h,...d}),w=ft({...b,...v});h.id!==g.id&&(delete w.template,delete w.templateParams),g._searchParams=Object.entries(w).reduce((_,[S,R])=>[..._,[S,R]],[]);const P=m??w.preview===r.current.url;p(_=>[..._,g]),e(g,{replace:P})},[e,r]),navigationHistory:u,params:a,searchParams:o,structureParams:i}}const bo=t=>{const[e,n]=f.useState(()=>new Set),s=f.useCallback(r=>{const a=window.open(r,"_blank");a&&n(i=>new Set(i).add(a))},[]);return f.useEffect(()=>{const r=[];if(e.size&&t)for(const a of e)a&&"closed"in a&&!a.closed&&r.push(t.addTarget(a));return()=>{r.forEach(a=>a())}},[t,e]),f.useEffect(()=>{if(e.size){const r=setInterval(()=>{const a=new Set;for(const i of e)i&&"closed"in i&&i.closed&&a.add(i);a.size&&n(i=>{const o=new Set(i);for(const c of a)o.delete(c);return o})},us);return()=>{clearInterval(r)}}},[e]),{popups:e,open:s}};function xo(t,e,n,s,r){var d,v;const a=ot({apiVersion:Pt}),i=Xn(),o=((d=i==null?void 0:i.activeWorkspace)==null?void 0:d.basePath)||"/",c=((v=i==null?void 0:i.activeWorkspace)==null?void 0:v.name)||"default",u=Po(e,o,c,s),p=So(r&&typeof t=="object"||typeof t=="function",u);return pr(async()=>{if(typeof t=="string"){const y=new URL(t,location.origin);let h=y;try{if(s){const b=new URL(s,y);b.origin===y.origin&&(h=b)}}catch{}return location.origin===h.origin&&(h.pathname.startsWith(`${o}/`)||h.pathname===o)?y:h}const m=await(typeof t=="object"?Ma(t):t)({client:a,previewUrlSecret:p,studioPreviewPerspective:n,previewSearchParam:s,studioBasePath:o});return new URL(m,location.origin)},[...u,p])}const wo=Symbol("sanity/presentation/resolveUUID");function Po(t,e,n,s){const r=z.c(12);let a;r[0]!==s?(a=()=>s||"",r[0]=s,r[1]=a):a=r[1];const[i,o]=f.useState(a),c=f.useRef(0);let u,p;r[2]!==i||r[3]!==s?(u=()=>{if(i&&s)return window.clearTimeout(c.current),()=>{c.current=window.setTimeout(()=>{o("")},100)}},p=[i,s],r[2]=i,r[3]=s,r[4]=u,r[5]=p):(u=r[4],p=r[5]),f.useEffect(u,p);const d=Ht();let v;const m=d==null?void 0:d.id;let y;return r[6]!==e||r[7]!==i||r[8]!==m||r[9]!==t||r[10]!==n?(y=["sanity/presentation",e,n,t,m,wo,i],r[6]=e,r[7]=i,r[8]=m,r[9]=t,r[10]=n,r[11]=y):y=r[11],v=y,v}function So(t,e){const n=z.c(10);let s;n[0]===Symbol.for("react.memo_cache_sentinel")?(s={apiVersion:Pt},n[0]=s):s=n[0];const r=ot(s),a=Ht(),[i,o]=f.useState("");let c;n[1]!==r||n[2]!==(a==null?void 0:a.id)||n[3]!==e||n[4]!==t||n[5]!==i?(c=t?pr(async()=>await Aa(r,"@sanity/presentation",typeof window>"u"?"":location.href,a==null?void 0:a.id),[...e,i]):null,n[1]=r,n[2]=a==null?void 0:a.id,n[3]=e,n[4]=t,n[5]=i,n[6]=c):c=n[6];const u=c;let p,d;return n[7]!==u?(p=()=>{if(!u)return;const v=setTimeout(()=>{f.startTransition(()=>o(u.expiresAt.toString()))},u.expiresAt.getTime()-Date.now());return()=>clearTimeout(v)},d=[u],n[7]=u,n[8]=p,n[9]=d):(p=n[8],d=n[9]),f.useEffect(p,d),(u==null?void 0:u.secret)||null}function Dt(){const t=z.c(4);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=new Map,t[0]=e):e=t[0];const[n,s]=f.useState(e);let r;e:{const u=Array.from(n.values());if(u.find(Eo)){r="connected";break e}const p=u.filter(jo);if(p.length){r=p.some(_o)?"connecting":"reconnecting";break e}r="idle"}const a=r;let i;t[1]===Symbol.for("react.memo_cache_sentinel")?(i=u=>{s(p=>{var v;const d=new Map(p);if(u.status==="disconnected")d.delete(u.connection);else{const m=((v=d.get(u.connection))==null?void 0:v.hasConnected)||u.status==="connected",y=u.status==="handshaking"?"connecting":u.status;d.set(u.connection,{status:y,hasConnected:m})}return d})},t[1]=i):i=t[1];const o=i;let c;return t[2]!==a?(c=[a,o],t[2]=a,t[3]=c):c=t[3],c}function _o(t){const{hasConnected:e}=t;return!e}function jo(t){const{status:e}=t;return e==="connecting"}function Eo(t){const{status:e}=t;return e==="connected"}const Ro=f.lazy(()=>Te(()=>import("./LoaderQueries-D1M5N6Wk.js"),__vite__mapDeps([2,1,3,4])));f.lazy(()=>Te(()=>import("./LiveQueries-BO4blD4R.js"),__vite__mapDeps([5,1,3,4])));const To=f.lazy(()=>Te(()=>import("./PostMessageDocuments-GHkoZ36J.js"),__vite__mapDeps([6,1]))),Co=f.lazy(()=>Te(()=>import("./PostMessageRefreshMutations-BNiGkGGz.js"),__vite__mapDeps([7,1]))),Io=f.lazy(()=>Te(()=>import("./PostMessagePerspective-CrP8RKQ_.js"),__vite__mapDeps([8,1]))),ko=f.lazy(()=>Te(()=>import("./PostMessagePreviewSnapshots-DX1BT2Im.js"),__vite__mapDeps([9,1]))),$o=f.lazy(()=>Te(()=>import("./PostMessageSchema-xdjtB8ED.js"),__vite__mapDeps([10,1]))),Ao=f.lazy(()=>Te(()=>import("./PostMessageTelemetry-BvsxFQq2.js"),__vite__mapDeps([11,1]))),Mo=ue(J)`
  overflow-x: auto;
`;function Oo(t){var ze,je,De,We,Ee;const{canCreateUrlPreviewSecrets:e,canToggleSharePreviewAccess:n,canUseSharedPreviewAccess:s,tool:r,vercelProtectionBypass:a}=t,i=(ze=r.options)==null?void 0:ze.components,o=(je=r.options)==null?void 0:je.previewUrl,c=r.name||Br,{unstable_navigator:u,unstable_header:p}=i||{},{navigate:d,state:v}=Xt(),m=Hn(Object.fromEntries(v._searchParams||[])),y=xo(o||"/",c,m.perspective==="published"?"published":"previewDrafts",m.preview||null,e),h=f.useMemo(()=>o&&typeof o=="object"&&"draftMode"in o&&o.draftMode?(console.warn("previewUrl.draftMode is deprecated, use previewUrl.previewMode instead"),o.draftMode.shareAccess!==!1):o&&typeof o=="object"&&"previewMode"in o&&o.previewMode?o.previewMode.shareAccess!==!1:!1,[o]),[b]=f.useState(()=>{var N;const $=(N=r.options)==null?void 0:N.devMode;return typeof $=="function"?$():typeof $=="boolean"?$:typeof window<"u"&&window.location.hostname==="localhost"}),g=f.useMemo(()=>y.origin,[y.origin]),w=f.useRef(null),[P,_]=f.useState(),[S,R]=f.useState(null),T=f.useRef({title:void 0,url:void 0}),{navigate:C,navigationHistory:j,params:x,searchParams:I,structureParams:A}=vo({initialPreviewUrl:y,routerNavigate:d,routerState:v,routerSearchParams:m,frameStateRef:T}),E=f.useMemo(()=>fr(C,50),[C]),[M,k]=f.useReducer(Hr,{},Kr),O=f.useMemo(()=>x.perspective?"published":"previewDrafts",[x.perspective]),D=f.useMemo(()=>x.viewport?"mobile":"desktop",[x.viewport]),[U,q]=so(O,T),G=Gr(),K=Xr(),Z=co({navigate:C,navigationHistory:j,path:x.preview,previewUrl:(De=r.options)==null?void 0:De.previewUrl,resolvers:(Ee=(We=r.options)==null?void 0:We.resolve)==null?void 0:Ee.mainDocuments}),[re,de]=Dt(),[L,se]=Dt(),[ae,oe]=Dt(),{open:B}=bo(P),H=M.iframe.status==="loading";f.useEffect(()=>{var W;const $=(W=w.current)==null?void 0:W.contentWindow;if(!$||H)return;const N=ma({targetOrigin:g});return N.addTarget($),_(N),()=>{N.destroy(),_(void 0)}},[g,H]);const F=Jt(($,N,W)=>E($,N,W));f.useEffect(()=>{if(!P)return;const $=P.createChannel({name:"presentation",heartbeat:!0,connectTo:"visual-editing"},bt().provide({actors:Pn()}));$.on("visual-editing/focus",W=>{"id"in W&&F({type:W.type,id:W.id,path:W.path})}),$.on("visual-editing/navigate",W=>{const{title:$e,url:ge}=W;if(T.current.url!==ge)try{const[Ae,Ye]=ge.split("?"),ye=new URLSearchParams(Ye);ye.delete(nt),ye.delete(tn),F({},{preview:`${Ae}${ye.size>0?"?":""}${ye}`})}catch{F({},{preview:ge})}T.current={title:$e,url:ge}}),$.on("visual-editing/meta",W=>{T.current.title=W.title}),$.on("visual-editing/toggle",W=>{k({type:Jr,enabled:W.enabled})}),$.on("visual-editing/documents",W=>{q("visual-editing",W.perspective,W.documents)}),$.on("visual-editing/refreshing",W=>{W.source==="manual"?clearTimeout(me.current):W.source==="mutation"&&k({type:mn})}),$.on("visual-editing/refreshed",()=>{k({type:qn})}),$.onStatus(de);const N=$.start();return R($),()=>{N(),R(null)}},[P,F,q,de,g]),f.useEffect(()=>{if(!P)return;const $=P.createChannel({name:"presentation",connectTo:"preview-kit",heartbeat:!0},bt().provide({actors:Pn()}));return $.onStatus(oe),$.on("preview-kit/documents",N=>{N.projectId===G&&N.dataset===K&&q("preview-kit",N.perspective,N.documents)}),$.start()},[P,K,G,q,oe,g]);const X=f.useCallback($=>{E({path:nr.toString($)},{},!0)},[E]),ce=f.useCallback($=>{const N=new URL($,y.origin),W=N.pathname+N.search;N.origin===y.origin&&W!==x.preview&&E({},{preview:W})},[y,x,E]),ee=f.useCallback($=>{E({},$)},[E]);f.useEffect(()=>{x.id&&x.path?S==null||S.post("presentation/focus",{id:x.id,path:x.path}):S==null||S.post("presentation/blur")},[x.id,x.path,S]),f.useEffect(()=>{T.current.url&&x.preview&&T.current.url!==x.preview&&(T.current.url=x.preview,re!=="connected"&&w.current?w.current.src=`${g}${x.preview}`:S==null||S.post("presentation/navigate",{url:x.preview,type:"replace"}))},[re,g,x.preview,S]);const Q=f.useCallback(()=>S==null?void 0:S.post("presentation/toggle-overlay"),[S]),[Y,ie]=f.useState(null);f.useEffect(()=>{const $=W=>{In(W)&&Q()},N=W=>{In(W)&&Q(),zo(["mod","\\"],W)&&Q()};return window.addEventListener("keydown",N),window.addEventListener("keyup",$),()=>{window.removeEventListener("keydown",N),window.removeEventListener("keyup",$)}},[Q]);const[pe,ve]=f.useState(null),[{navigatorEnabled:fe,toggleNavigator:be},he]=ki({unstable_navigator:u}),xe=f.useRef(x.id);f.useEffect(()=>{x.rev&&xe.current&&x.id!==xe.current&&E({},{rev:void 0}),xe.current=x.id});const me=f.useRef(void 0),Qe=f.useCallback($=>{if(k({type:mn}),S){me.current=window.setTimeout($,300),S.post("presentation/refresh",{source:"manual",livePreviewEnabled:ae==="connected"||L==="connected"});return}$()},[L,ae,S]),_e=Qr(),Ce=f.useCallback(({id:$,type:N,path:W})=>{if(T.current.url)return{title:T.current.title||T.current.url,name:"edit",params:{id:$,path:W,type:N,inspect:Yr,workspace:_e.name,mode:Zr,preview:x.preview}}},[x.preview,_e.name]),Ie=f.useCallback($=>{E({},{viewport:$==="desktop"?void 0:"mobile"},!0)},[E]),ke=f.useCallback($=>{E({},{perspective:$==="previewDrafts"?void 0:$})},[E]);return l.jsxs(l.Fragment,{children:[l.jsx(Li,{devMode:b,name:c,navigate:E,params:x,searchParams:I,structureParams:A,children:l.jsx(Ci,{navigate:E,children:l.jsx(Oi,{params:x,children:l.jsx(qa,{comlink:S,children:l.jsx(Mo,{height:"fill",children:l.jsxs(Za,{children:[l.jsx(he,{}),l.jsx(dn,{id:"preview",minWidth:325,defaultSize:fe?50:75,order:3,children:l.jsx(J,{direction:"column",flex:1,height:"fill",ref:ve,children:l.jsx(es,{element:pe,children:l.jsx(xr,{canSharePreviewAccess:h,canToggleSharePreviewAccess:n,canUseSharedPreviewAccess:s,dispatch:k,header:p,iframe:M.iframe,initialUrl:y,loadersConnection:L,navigatorEnabled:fe,onPathChange:ce,onRefresh:Qe,openPopup:B,overlaysConnection:re,previewUrl:x.preview,perspective:O,ref:w,setPerspective:ke,setViewport:Ie,targetOrigin:g,toggleNavigator:be,toggleOverlay:Q,viewport:D,visualEditing:M.visualEditing,vercelProtectionBypass:a},g)})})}),l.jsx(Ti,{documentId:x.id,documentsOnPage:U,documentType:x.type,getCommentIntent:Ce,mainDocumentState:Z,onFocusPath:X,onStructureParams:ee,searchParams:I,setDisplayedDocument:ie,structureParams:A})]})})})})})}),l.jsxs(f.Suspense,{children:[P&&l.jsx(Ro,{controller:P,perspective:O,liveDocument:Y,onDocumentsOnPage:q,onLoadersConnection:se,documentsOnPage:U}),S&&x.id&&x.type&&l.jsx(Co,{comlink:S,id:x.id,type:x.type,loadersConnection:L,previewKitConnection:ae}),S&&l.jsx($o,{comlink:S,perspective:O}),S&&U.length>0&&l.jsx(ko,{comlink:S,perspective:O,refs:U}),S&&l.jsx(To,{comlink:S}),S&&l.jsx(Na,{comlink:S}),S&&l.jsx(Io,{comlink:S,perspective:O}),S&&l.jsx(Ao,{comlink:S}),x.id&&x.type&&l.jsx(to,{documentId:x.id,documentRevision:x.rev,documentType:x.type,navigate:E,perspective:O})]})]})}function In(t){return t.key==="Alt"}const Lo=typeof window<"u"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),kn={alt:"altKey",ctrl:"ctrlKey",mod:Lo?"metaKey":"ctrlKey",shift:"shiftKey"};function zo(t,e){return t.every(n=>kn[n]?e[kn[n]]:e.key===n.toUpperCase())}function Do(){const t=z.c(7);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e={apiVersion:_t},t[0]=e):e=t[0];const n=ot(e),[s,r]=f.useReducer(Wo,"loading"),[a,i]=f.useState(null);let o,c;t[1]!==n?(o=()=>{const p=Da(n,d=>{i(d),r()});return()=>p()},c=[n],t[1]=n,t[2]=o,t[3]=c):(o=t[2],c=t[3]),f.useEffect(o,c);let u;return t[4]!==s||t[5]!==a?(u=[a,s],t[4]=s,t[5]=a,t[6]=u):u=t[6],u}function Wo(){return"ready"}function No(t){const e=z.c(17),{t:n}=Pe(Se),{previewUrl:s}=t.tool.options??{},{push:r}=Ln(),a=typeof s=="object"||typeof s=="function",i=Vr(),[o,c]=f.useState(null),[u,p]=f.useState(null),[d,v]=f.useState(null),[m,y]=f.useState(null);let h,b;e[0]!==i||e[1]!==a?(h=()=>{if(!a)return;const x=i.checkDocumentPermission("create",{_id:Le,_type:Xe}).subscribe(c),I=i.checkDocumentPermission("update",{_id:Le,_type:Xe}).subscribe(p),A=i.checkDocumentPermission("read",{_id:Le,_type:Xe}).subscribe(v),E=i.checkDocumentPermission("create",{_id:`drafts.${On()}`,_type:Yt}).subscribe(y);return()=>{x.unsubscribe(),I.unsubscribe(),A.unsubscribe(),E.unsubscribe()}},b=[i,a],e[0]=i,e[1]=a,e[2]=h,e[3]=b):(h=e[2],b=e[3]),f.useEffect(h,b);const g=m==null?void 0:m.granted;let w,P;e[4]!==g||e[5]!==r||e[6]!==n||e[7]!==a?(w=()=>{if(!a||g!==!1)return;const x=requestAnimationFrame(()=>r({closable:!0,status:"error",duration:3e4,title:n("preview-url-secret.missing-grants")}));return()=>cancelAnimationFrame(x)},P=[g,r,n,a],e[4]=g,e[5]=r,e[6]=n,e[7]=a,e[8]=w,e[9]=P):(w=e[8],P=e[9]),f.useEffect(w,P);const[_,S]=Do();if(S==="loading"||a&&(!o||typeof o.granted>"u"||!u||typeof u.granted>"u"||!m||!d||typeof d.granted>"u"||typeof m.granted>"u")){let x;return e[10]===Symbol.for("react.memo_cache_sentinel")?(x=l.jsx(Kn,{}),e[10]=x):x=e[10],x}const R=g===!0,T=(o==null?void 0:o.granted)===!0&&(u==null?void 0:u.granted)===!0,C=(d==null?void 0:d.granted)===!0;let j;return e[11]!==t||e[12]!==R||e[13]!==T||e[14]!==C||e[15]!==_?(j=l.jsx(Oo,{...t,vercelProtectionBypass:_,canCreateUrlPreviewSecrets:R,canToggleSharePreviewAccess:T,canUseSharedPreviewAccess:C}),e[11]=t,e[12]=R,e[13]=T,e[14]=C,e[15]=_,e[16]=j):j=e[16],j}const Ko=Object.freeze(Object.defineProperty({__proto__:null,default:No},Symbol.toStringTag,{value:"Module"}));export{Ko as P,Pn as a,Hs as b,bt as c,Fo as d,Vo as e,ir as g,Bo as p,Ho as r,Ks as t,et as w};
