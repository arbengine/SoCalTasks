import{r as f,b as M,bf as g,bd as v,j as x}from"./sanity-CeuAV6R0.js";function w(u){const t=M.c(8),{comlink:e,type:s,previewKitConnection:o,loadersConnection:a}=u;let r,_;t[0]!==u.id?(_=g(u.id),t[0]=u.id,t[1]=_):_=t[1],r=_;const n=r,{draft:l,published:i,ready:m}=v(n,s,"low"),d=o==="connected"||a==="connected";if(m&&l||i){let c;return t[2]!==e||t[3]!==l||t[4]!==n||t[5]!==d||t[6]!==i?(c=x.jsx(R,{comlink:e,draft:l,livePreviewEnabled:d,published:i},n),t[2]=e,t[3]=l,t[4]=n,t[5]=d,t[6]=i,t[7]=c):c=t[7],c}return null}function R(u){const t=M.c(14),{comlink:e,draft:s,published:o,livePreviewEnabled:a}=u,[r,_]=f.useState(s),[n,l]=f.useState(o);let i;t[0]!==e||t[1]!==s||t[2]!==a||t[3]!==(r==null?void 0:r._rev)||t[4]!==(n==null?void 0:n._rev)||t[5]!==o?(i=()=>{(r==null?void 0:r._rev)!==(s==null?void 0:s._rev)&&(f.startTransition(()=>_(s)),s&&(e==null||e.post("presentation/refresh",{source:"mutation",livePreviewEnabled:a,document:E(s)}))),(n==null?void 0:n._rev)!==(o==null?void 0:o._rev)&&(f.startTransition(()=>l(o)),o&&(e==null||e.post("presentation/refresh",{source:"mutation",livePreviewEnabled:a,document:E(o)})))},t[0]=e,t[1]=s,t[2]=a,t[3]=r==null?void 0:r._rev,t[4]=n==null?void 0:n._rev,t[5]=o,t[6]=i):i=t[6];const m=r==null?void 0:r._rev,d=n==null?void 0:n._rev;let c;return t[7]!==e||t[8]!==s||t[9]!==a||t[10]!==o||t[11]!==m||t[12]!==d?(c=[e,s,a,m,d,o],t[7]=e,t[8]=s,t[9]=a,t[10]=o,t[11]=m,t[12]=d,t[13]=c):c=t[13],f.useEffect(i,c),null}function E(u){const{_id:t,_type:e,_rev:s,slug:o}=u;return{_id:t,_type:e,_rev:s,slug:o}}var y=f.memo(w);export{y as default};
